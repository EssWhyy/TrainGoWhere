{"ast":null,"code":"import React, { Component } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar initialState = {\n  wrapperComponent: null,\n  contentComponent: null,\n  previousScale: 1,\n  scale: 1,\n  positionX: 0,\n  positionY: 0,\n  options: {\n    disabled: false,\n    transformEnabled: true,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    limitToWrapper: false,\n    centerContent: true,\n    wrapperClass: \"\",\n    contentClass: \"\"\n  },\n  wheel: {\n    disabled: false,\n    step: 5,\n    wheelEnabled: true,\n    touchPadEnabled: true,\n    limitsOnWheel: false\n  },\n  pan: {\n    disabled: false,\n    panAnimationType: \"linear\",\n    lockAxisX: false,\n    lockAxisY: false,\n    velocity: true,\n    velocityEqualToMove: true,\n    velocitySensitivity: 2,\n    velocityActiveScale: 1,\n    velocityMinSpeed: 1,\n    velocityBaseTime: 1600,\n    velocityAnimationType: \"easeOutQuart\",\n    padding: true,\n    paddingSize: 30,\n    panReturnAnimationTime: 400,\n    panReturnAnimationType: \"easeOut\",\n    disableOnTarget: []\n  },\n  pinch: {\n    disabled: false\n  },\n  zoomIn: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  zoomOut: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  doubleClick: {\n    disabled: false,\n    step: 20,\n    mode: \"zoomIn\",\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  reset: {\n    disabled: false,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200\n  },\n  scalePadding: {\n    disabled: false,\n    size: 0.2,\n    animationTime: 200,\n    animationType: \"easeOut\"\n  }\n};\n/**\r\n * Rounds number to given decimal\r\n * eg. roundNumber(2.34343, 1) => 2.3\r\n */\n\nvar roundNumber = function (num, decimal) {\n  return Number(num.toFixed(decimal));\n};\n/**\r\n * Checks if value is number, if not it returns default value\r\n * 1# eg. checkIsNumber(2, 30) => 2\r\n * 2# eg. checkIsNumber(null, 30) => 30\r\n */\n\n\nvar checkIsNumber = function (num, defaultValue) {\n  return typeof num === \"number\" ? num : defaultValue;\n};\n/**\r\n * Keeps value between given bounds, used for limiting view to given boundaries\r\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\r\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\r\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\r\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\r\n */\n\n\nvar boundLimiter = function (value, minBound, maxBound, isActive) {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\n/**\r\n * Calculate bounding area of zoomed/panned element\r\n */\n\n\nvar calculateBoundingArea = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, limitToWrapper) {\n  var scaleWidthFactor = wrapperWidth > newContentWidth ? diffWidth * (limitToWrapper ? 1 : 0.5) : 0;\n  var scaleHeightFactor = wrapperHeight > newContentHeight ? diffHeight * (limitToWrapper ? 1 : 0.5) : 0;\n  var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n  var maxPositionX = scaleWidthFactor;\n  var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n  var maxPositionY = scaleHeightFactor;\n  return {\n    minPositionX: minPositionX,\n    maxPositionX: maxPositionX,\n    minPositionY: minPositionY,\n    maxPositionY: maxPositionY\n  };\n};\n/**\r\n * Returns distance between two points x,y\r\n */\n\n\nvar getDistance = function (firstPoint, secondPoint) {\n  return Math.sqrt(Math.pow(firstPoint.pageX - secondPoint.pageX, 2) + Math.pow(firstPoint.pageY - secondPoint.pageY, 2));\n};\n/**\r\n * Delete undefined values from object keys\r\n * Used for deleting empty props\r\n */\n\n\nvar deleteUndefinedProps = function (value) {\n  var newObject = __assign({}, value);\n\n  Object.keys(newObject).forEach(function (key) {\n    return newObject[key] === undefined && delete newObject[key];\n  });\n  return newObject;\n};\n/**\r\n * Fire callback if it's function\r\n */\n\n\nvar handleCallback = function (callback, props) {\n  if (callback && typeof callback === \"function\") {\n    callback(props);\n  }\n};\n\nvar handleWheelStop = function (previousEvent, event, stateProvider) {\n  var scale = stateProvider.scale,\n      _a = stateProvider.options,\n      maxScale = _a.maxScale,\n      minScale = _a.minScale;\n  if (!previousEvent) return false;\n  if (scale < maxScale || scale > minScale) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  if (previousEvent.deltaY > 0 && previousEvent.deltaY < event.deltaY) return true;\n  if (previousEvent.deltaY < 0 && previousEvent.deltaY > event.deltaY) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  return false;\n};\n\nvar mergeProps = function (initialState, dynamicProps) {\n  return Object.keys(initialState).reduce(function (acc, curr) {\n    if (typeof dynamicProps[curr] === \"object\" && dynamicProps[curr] !== null) {\n      acc[curr] = __assign(__assign({}, initialState[curr]), dynamicProps[curr]);\n    } else {\n      acc[curr] = dynamicProps[curr] === undefined ? initialState[curr] : dynamicProps[curr];\n    }\n\n    return acc;\n  }, {});\n};\n\nfunction getWindowScaleY(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerHeight / wrapper.offsetHeight;\n}\n\nfunction getWindowScaleX(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerWidth / wrapper.offsetWidth;\n}\n/**\r\n * Functions should return denominator of the target value, which is the next animation step.\r\n * t is a value from 0 to 1, reflecting the percentage of animation status.\r\n */\n\n\nvar easeOut = function (t) {\n  return -Math.cos(t * Math.PI) / 2 + 0.5;\n}; // linear\n\n\nvar linear = function (t) {\n  return t;\n}; // accelerating from zero velocity\n\n\nvar easeInQuad = function (t) {\n  return t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuad = function (t) {\n  return t * (2 - t);\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuad = function (t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}; // accelerating from zero velocity\n\n\nvar easeInCubic = function (t) {\n  return t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutCubic = function (t) {\n  return --t * t * t + 1;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutCubic = function (t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}; // accelerating from zero velocity\n\n\nvar easeInQuart = function (t) {\n  return t * t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuart = function (t) {\n  return 1 - --t * t * t * t;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuart = function (t) {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n}; // accelerating from zero velocity\n\n\nvar easeInQuint = function (t) {\n  return t * t * t * t * t;\n}; // decelerating to zero velocity\n\n\nvar easeOutQuint = function (t) {\n  return 1 + --t * t * t * t * t;\n}; // acceleration until halfway, then deceleration\n\n\nvar easeInOutQuint = function (t) {\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\n\nvar availableAnimations = {\n  easeOut: easeOut,\n  linear: linear,\n  easeInQuad: easeInQuad,\n  easeOutQuad: easeOutQuad,\n  easeInOutQuad: easeInOutQuad,\n  easeInCubic: easeInCubic,\n  easeOutCubic: easeOutCubic,\n  easeInOutCubic: easeInOutCubic,\n  easeInQuart: easeInQuart,\n  easeOutQuart: easeOutQuart,\n  easeInOutQuart: easeInOutQuart,\n  easeInQuint: easeInQuint,\n  easeOutQuint: easeOutQuint,\n  easeInOutQuint: easeInOutQuint\n};\n\nfunction handleDisableAnimation() {\n  if (!this.mounted) return;\n\n  if (this.animation) {\n    cancelAnimationFrame(this.animation);\n  }\n\n  this.animate = false;\n  this.animation = false;\n  this.velocity = false;\n}\n\nfunction animate(animationName, animationTime, callback) {\n  var _this = this;\n\n  if (!this.mounted) return;\n  var startTime = new Date().getTime();\n  var lastStep = 1; // if another animation is active\n\n  handleDisableAnimation.call(this); // new animation\n\n  this.animation = function () {\n    if (!_this.animation || !_this.mounted) return;\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / animationTime;\n    var animationType = availableAnimations[animationName];\n    var step = animationType(animationProgress);\n\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      _this.animation = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(_this.animation);\n    }\n  };\n\n  requestAnimationFrame(this.animation);\n}\n\nfunction animateComponent(_a) {\n  var _this = this;\n\n  var targetState = _a.targetState,\n      speed = _a.speed,\n      type = _a.type;\n  var _b = this.stateProvider,\n      scale = _b.scale,\n      positionX = _b.positionX,\n      positionY = _b.positionY;\n  var scaleDiff = targetState.scale - scale;\n  var positionXDiff = targetState.positionX - positionX;\n  var positionYDiff = targetState.positionY - positionY;\n\n  if (speed === 0) {\n    this.stateProvider.previousScale = this.stateProvider.scale;\n    this.stateProvider.scale = targetState.scale;\n    this.stateProvider.positionX = targetState.positionX;\n    this.stateProvider.positionY = targetState.positionY;\n    this.applyTransformation();\n  } else {\n    // animation start timestamp\n    animate.call(this, type, speed, function (step) {\n      _this.stateProvider.previousScale = _this.stateProvider.scale;\n      _this.stateProvider.scale = scale + scaleDiff * step;\n      _this.stateProvider.positionX = positionX + positionXDiff * step;\n      _this.stateProvider.positionY = positionY + positionYDiff * step; // apply animation changes\n\n      _this.applyTransformation();\n    });\n  }\n}\n\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n  var scalePadding = enablePadding ? zoomPadding : 0;\n  var minScaleWithPadding = minScale - scalePadding;\n  if (!isNaN(maxScale) && zoom >= maxScale) return maxScale;\n  if (!isNaN(minScale) && zoom <= minScaleWithPadding) return minScaleWithPadding;\n  return zoom;\n}\n\nfunction checkPositionBounds(positionX, positionY, bounds, limitToBounds, paddingValue, wrapperComponent) {\n  var minPositionX = bounds.minPositionX,\n      minPositionY = bounds.minPositionY,\n      maxPositionX = bounds.maxPositionX,\n      maxPositionY = bounds.maxPositionY;\n  var paddingX = wrapperComponent ? paddingValue * wrapperComponent.offsetWidth / 100 : 0;\n  var paddingY = wrapperComponent ? paddingValue * wrapperComponent.offsetHeight / 100 : 0;\n  var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n  var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n  return {\n    x: x,\n    y: y\n  };\n}\n\nfunction getDelta(event, customDelta) {\n  var deltaY = event ? event.deltaY < 0 ? 1 : -1 : 0;\n  var delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\n\nfunction wheelMousePosition(event, contentComponent, scale) {\n  var contentRect = contentComponent.getBoundingClientRect(); // mouse position x, y over wrapper component\n\n  var mouseX = (event.clientX - contentRect.left) / scale;\n  var mouseY = (event.clientY - contentRect.top) / scale;\n  if (isNaN(mouseX) || isNaN(mouseY)) console.error(\"No mouse or touch offset found\");\n  return {\n    mouseX: mouseX,\n    mouseY: mouseY\n  };\n}\n\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var contentWidth = contentComponent.offsetWidth;\n  var contentHeight = contentComponent.offsetHeight;\n  var newContentWidth = contentWidth * newScale;\n  var newContentHeight = contentHeight * newScale;\n  var newDiffWidth = wrapperWidth - newContentWidth;\n  var newDiffHeight = wrapperHeight - newContentHeight;\n  return {\n    wrapperWidth: wrapperWidth,\n    wrapperHeight: wrapperHeight,\n    newContentWidth: newContentWidth,\n    newDiffWidth: newDiffWidth,\n    newContentHeight: newContentHeight,\n    newDiffHeight: newDiffHeight\n  };\n}\n\nfunction handleCalculatePositions(mouseX, mouseY, newScale, bounds, limitToBounds) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      transformEnabled = _a.options.transformEnabled;\n  var scaleDifference = newScale - scale;\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") return console.error(\"Mouse X and Y position were not provided!\");\n  if (!transformEnabled) return {\n    newPositionX: positionX,\n    newPositionY: positionY\n  };\n  var calculatedPositionX = positionX - mouseX * scaleDifference;\n  var calculatedPositionY = positionY - mouseY * scaleDifference; // do not limit to bounds when there is padding animation,\n  // it causes animation strange behaviour\n\n  var newPositions = checkPositionBounds(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, null);\n  return newPositions;\n}\n\nfunction getClientPosition(event) {\n  var touches = event.touches; // Mobile points\n\n  if (touches && touches.length === 1) {\n    return {\n      clientX: touches[0].clientX,\n      clientY: touches[0].clientY\n    };\n  } // Desktop points\n\n\n  if (!touches) {\n    return {\n      clientX: event.clientX,\n      clientY: event.clientY\n    };\n  }\n\n  return null;\n}\n\nfunction handlePanning(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      _b = _a.options,\n      limitToBounds = _b.limitToBounds,\n      minScale = _b.minScale,\n      _c = _a.pan,\n      lockAxisX = _c.lockAxisX,\n      lockAxisY = _c.lockAxisY,\n      padding = _c.padding,\n      paddingSize = _c.paddingSize,\n      wrapperComponent = _a.wrapperComponent;\n  if (!this.startCoords) return;\n  var _d = this.startCoords,\n      x = _d.x,\n      y = _d.y;\n  var positions = getClientPosition(event);\n  if (!positions) return console.error(\"Cannot find mouse client positions\");\n  var clientX = positions.clientX,\n      clientY = positions.clientY; // Get Position\n\n  var mouseX = clientX - x;\n  var mouseY = clientY - y;\n  var newPositionX = lockAxisX ? positionX : mouseX;\n  var newPositionY = lockAxisY ? positionY : mouseY; // padding\n\n  var paddingValue = padding && scale >= minScale ? paddingSize : 0; // If position didn't change\n\n  if (newPositionX === positionX && newPositionY === positionY) return;\n  var calculatedPosition = checkPositionBounds(newPositionX, newPositionY, this.bounds, limitToBounds, paddingValue, wrapperComponent); // Save panned position\n\n  handlePaddingAnimation.call(this, calculatedPosition.x, calculatedPosition.y);\n}\n\nfunction handlePanningAnimation() {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      minScale = _a.options.minScale,\n      _b = _a.pan,\n      disabled = _b.disabled,\n      padding = _b.padding,\n      panReturnAnimationTime = _b.panReturnAnimationTime,\n      panReturnAnimationType = _b.panReturnAnimationType;\n  var isDisabled = disabled || scale < minScale || !padding;\n  if (isDisabled) return;\n  var targetState = handlePanToBounds.call(this);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: panReturnAnimationTime,\n    type: panReturnAnimationType\n  });\n}\n\nfunction handlePanToBounds() {\n  var _a = this.stateProvider,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      scale = _a.scale,\n      _b = _a.options,\n      disabled = _b.disabled,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper;\n  var wrapperComponent = this.state.wrapperComponent;\n  if (disabled) return;\n  var _c = this.bounds,\n      maxPositionX = _c.maxPositionX,\n      minPositionX = _c.minPositionX,\n      maxPositionY = _c.maxPositionY,\n      minPositionY = _c.minPositionY;\n  var xChanged = positionX > maxPositionX || positionX < minPositionX;\n  var yChanged = positionY > maxPositionY || positionY < minPositionY;\n  var mouseX = positionX > maxPositionX ? wrapperComponent.offsetWidth : this.stateProvider.minPositionX || 0;\n  var mouseY = positionY > maxPositionY ? wrapperComponent.offsetHeight : this.stateProvider.minPositionY || 0;\n  var mousePosX = mouseX;\n  var mousePosY = mouseY;\n\n  var _d = handleCalculatePositions.call(this, mousePosX, mousePosY, scale, this.bounds, limitToBounds || limitToWrapper),\n      x = _d.x,\n      y = _d.y;\n\n  return {\n    scale: scale,\n    positionX: xChanged ? x : positionX,\n    positionY: yChanged ? y : positionY\n  };\n}\n\nfunction handlePaddingAnimation(positionX, positionY) {\n  var padding = this.stateProvider.pan.padding;\n  if (!padding) return;\n  this.stateProvider.positionX = positionX;\n  this.stateProvider.positionY = positionY;\n  this.applyTransformation();\n}\n\nfunction handleCalculateZoom(delta, step, disablePadding, getTarget, isBtnFunction) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      _b = _a.options,\n      maxScale = _b.maxScale,\n      minScale = _b.minScale,\n      _c = _a.scalePadding,\n      size = _c.size,\n      disabled = _c.disabled,\n      wrapperComponent = _a.wrapperComponent;\n  var targetScale = null;\n\n  if (isBtnFunction) {\n    var scaleFactor = window.innerWidth * 0.0001;\n    var zoomFactor = delta < 0 ? 30 : 20;\n    targetScale = scale + (step - step * scaleFactor) * delta * (scale / zoomFactor);\n  } else {\n    var wrapperToWindowScale = 2 - window.innerWidth / wrapperComponent.offsetWidth;\n    var scaleFactor = Math.max(0.2, Math.min(0.99, wrapperToWindowScale));\n    var zoomFactor = 20;\n    targetScale = scale + step * delta * ((scale - scale * scaleFactor) / zoomFactor);\n  }\n\n  if (getTarget) return targetScale;\n  var paddingEnabled = disablePadding ? false : !disabled;\n  var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled);\n  return newScale;\n}\n\nfunction handleCalculateBounds(newScale, limitToWrapper) {\n  var _a = this.stateProvider,\n      wrapperComponent = _a.wrapperComponent,\n      contentComponent = _a.contentComponent;\n\n  var _b = getComponentsSizes(wrapperComponent, contentComponent, newScale),\n      wrapperWidth = _b.wrapperWidth,\n      wrapperHeight = _b.wrapperHeight,\n      newContentWidth = _b.newContentWidth,\n      newDiffWidth = _b.newDiffWidth,\n      newContentHeight = _b.newContentHeight,\n      newDiffHeight = _b.newDiffHeight;\n\n  var bounds = calculateBoundingArea(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, limitToWrapper); // Save bounds\n\n  this.bounds = bounds;\n  return bounds;\n}\n/**\r\n * Wheel zoom event\r\n */\n\n\nfunction handleWheelZoom(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      contentComponent = _a.contentComponent,\n      limitToBounds = _a.options.limitToBounds,\n      _b = _a.scalePadding,\n      size = _b.size,\n      disabled = _b.disabled,\n      _c = _a.wheel,\n      step = _c.step,\n      limitsOnWheel = _c.limitsOnWheel;\n  event.preventDefault();\n  event.stopPropagation();\n  var delta = getDelta(event, null);\n  var newScale = handleCalculateZoom.call(this, delta, step, !event.ctrlKey); // if scale not change\n\n  if (scale === newScale) return;\n  var bounds = handleCalculateBounds.call(this, newScale, !limitsOnWheel);\n\n  var _d = wheelMousePosition(event, contentComponent, scale),\n      mouseX = _d.mouseX,\n      mouseY = _d.mouseY;\n\n  var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds),\n      x = _e.x,\n      y = _e.y;\n\n  this.bounds = bounds;\n  this.stateProvider.previousScale = scale;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.applyTransformation();\n}\n/**\r\n * Zoom for animations\r\n */\n\n\nfunction handleZoomToPoint(isDisabled, scale, mouseX, mouseY, event) {\n  var _a = this.stateProvider,\n      contentComponent = _a.contentComponent,\n      _b = _a.options,\n      disabled = _b.disabled,\n      minScale = _b.minScale,\n      maxScale = _b.maxScale,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper;\n  if (disabled || isDisabled) return;\n  var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, null, null);\n  var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\n  var mousePosX = mouseX;\n  var mousePosY = mouseY; // if event is present - use it's mouse position\n\n  if (event) {\n    var mousePosition = wheelMousePosition(event, contentComponent, scale);\n    mousePosX = mousePosition.mouseX;\n    mousePosY = mousePosition.mouseY;\n  }\n\n  var _c = handleCalculatePositions.call(this, mousePosX, mousePosY, newScale, bounds, limitToBounds),\n      x = _c.x,\n      y = _c.y;\n\n  return {\n    scale: newScale,\n    positionX: x,\n    positionY: y\n  };\n}\n\nfunction handlePaddingAnimation$1() {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      wrapperComponent = _a.wrapperComponent,\n      _b = _a.options,\n      minScale = _b.minScale,\n      limitToBounds = _b.limitToBounds,\n      _c = _a.scalePadding,\n      disabled = _c.disabled,\n      animationTime = _c.animationTime,\n      animationType = _c.animationType;\n  var isDisabled = disabled || scale >= minScale;\n\n  if (scale >= 1 || limitToBounds) {\n    // fire fit to bounds animation\n    handlePanningAnimation.call(this);\n  }\n\n  if (isDisabled) return;\n  var mouseX = wrapperComponent.offsetWidth / 2;\n  var mouseY = wrapperComponent.offsetHeight / 2;\n  var targetState = handleZoomToPoint.call(this, false, minScale, mouseX, mouseY, null);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: animationTime,\n    type: animationType\n  });\n}\n/**\r\n * Button zoom events\r\n */\n\n\nfunction handleDoubleClick(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  var _a = this.stateProvider,\n      contentComponent = _a.contentComponent,\n      scale = _a.scale,\n      _b = _a.doubleClick,\n      disabled = _b.disabled,\n      mode = _b.mode,\n      step = _b.step,\n      animationTime = _b.animationTime,\n      animationType = _b.animationType;\n\n  if (mode === \"reset\") {\n    return resetTransformations.call(this, event, animationTime);\n  }\n\n  var delta = mode === \"zoomOut\" ? -1 : 1;\n  var newScale = handleCalculateZoom.call(this, delta, step, undefined, undefined, true);\n\n  var _c = wheelMousePosition(event, contentComponent, scale),\n      mouseX = _c.mouseX,\n      mouseY = _c.mouseY;\n\n  var targetState = handleZoomToPoint.call(this, disabled, newScale, mouseX, mouseY);\n  if (targetState.scale === scale) return;\n  var targetScale = handleCalculateZoom.call(this, delta, step, true, undefined, true);\n  var time = getButtonAnimationTime(targetScale, newScale, animationTime);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: time,\n    type: animationType\n  });\n}\n\nfunction handleZoomControls(customDelta, customStep) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      wrapperComponent = _a.wrapperComponent,\n      zoomIn = _a.zoomIn,\n      zoomOut = _a.zoomOut;\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var mouseX = (wrapperWidth / 2 - positionX) / scale;\n  var mouseY = (wrapperHeight / 2 - positionY) / scale;\n  var newScale = handleCalculateZoom.call(this, customDelta, customStep, undefined, undefined, true);\n  var isZoomIn = newScale > scale;\n  var animationSpeed = isZoomIn ? zoomIn.animationTime : zoomOut.animationTime;\n  var animationType = isZoomIn ? zoomIn.animationType : zoomOut.animationType;\n  var isDisabled = isZoomIn ? zoomIn.disabled : zoomOut.disabled;\n  var targetState = handleZoomToPoint.call(this, isDisabled, newScale, mouseX, mouseY);\n  if (targetState.scale === scale) return;\n  var targetScale = handleCalculateZoom.call(this, customDelta, customStep, true, undefined, true);\n  var time = getButtonAnimationTime(targetScale, newScale, animationSpeed);\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: time,\n    type: animationType\n  });\n}\n\nfunction resetTransformations(animationSpeed) {\n  var _a = this.props.defaultValues,\n      defaultScale = _a.defaultScale,\n      defaultPositionX = _a.defaultPositionX,\n      defaultPositionY = _a.defaultPositionY;\n  var _b = this.stateProvider,\n      scale = _b.scale,\n      positionX = _b.positionX,\n      positionY = _b.positionY,\n      reset = _b.reset,\n      _c = _b.options,\n      disabled = _c.disabled,\n      limitToBounds = _c.limitToBounds,\n      centerContent = _c.centerContent,\n      limitToWrapper = _c.limitToWrapper;\n  if (disabled || reset.disabled) return;\n  if (scale === defaultScale && positionX === defaultPositionX && positionY === defaultPositionY) return;\n  var speed = typeof animationSpeed === \"number\" ? animationSpeed : reset.animationTime;\n  var targetScale = checkIsNumber(defaultScale, initialState.scale);\n  var newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\n  var newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\n\n  if (limitToBounds && !limitToWrapper || centerContent) {\n    var bounds = handleCalculateBounds.call(this, targetScale, limitToWrapper);\n    newPositionX = bounds.minPositionX;\n    newPositionY = bounds.minPositionY;\n  }\n\n  var targetState = {\n    scale: targetScale,\n    positionX: newPositionX,\n    positionY: newPositionY\n  };\n  animateComponent.call(this, {\n    targetState: targetState,\n    speed: speed,\n    type: reset.animationType\n  });\n}\n\nfunction getButtonAnimationTime(targetScale, newScale, time) {\n  return time * (newScale / targetScale);\n}\n\nfunction round(number, decimal) {\n  var roundNumber = Math.pow(10, decimal);\n  return Math.round(number * roundNumber) / roundNumber;\n}\n\nfunction getCurrentDistance(event) {\n  return getDistance(event.touches[0], event.touches[1]);\n}\n\nfunction checkIfInfinite(number) {\n  return number === Infinity || number === -Infinity;\n}\n\nfunction calculatePinchZoom(currentDistance, pinchStartDistance) {\n  var _a = this.stateProvider,\n      _b = _a.options,\n      minScale = _b.minScale,\n      maxScale = _b.maxScale,\n      _c = _a.scalePadding,\n      size = _c.size,\n      disabled = _c.disabled;\n  if (typeof pinchStartDistance !== \"number\" || typeof currentDistance !== \"number\") return console.error(\"Pinch touches distance was not provided\");\n  if (currentDistance < 0) return;\n  var touchProportion = currentDistance / pinchStartDistance;\n  var scaleDifference = touchProportion * this.pinchStartScale;\n  return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled);\n}\n\nfunction calculateMidpoint(event, scale, contentComponent) {\n  var contentRect = contentComponent.getBoundingClientRect();\n  var touches = event.touches;\n  var firstPointX = round(touches[0].clientX - contentRect.left, 5);\n  var firstPointY = round(touches[0].clientY - contentRect.top, 5);\n  var secondPointX = round(touches[1].clientX - contentRect.left, 5);\n  var secondPointY = round(touches[1].clientY - contentRect.top, 5);\n  return {\n    mouseX: (firstPointX + secondPointX) / 2 / scale,\n    mouseY: (firstPointY + secondPointY) / 2 / scale\n  };\n}\n\nfunction handleZoomPinch(event) {\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      _b = _a.options,\n      limitToBounds = _b.limitToBounds,\n      limitToWrapper = _b.limitToWrapper,\n      _c = _a.scalePadding,\n      disabled = _c.disabled,\n      size = _c.size,\n      limitsOnWheel = _a.wheel.limitsOnWheel,\n      pinch = _a.pinch;\n  var contentComponent = this.state.contentComponent;\n  if (pinch.disabled || this.stateProvider.options.disabled) return;\n\n  if (event.cancelable) {\n    event.preventDefault();\n    event.stopPropagation();\n  } // if one finger starts from outside of wrapper\n\n\n  if (this.pinchStartDistance === null) return; // Position transformation\n\n  var _d = calculateMidpoint(event, scale, contentComponent),\n      mouseX = _d.mouseX,\n      mouseY = _d.mouseY; // if touches goes off of the wrapper element\n\n\n  if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY)) return;\n  var currentDistance = getCurrentDistance(event);\n  var newScale = calculatePinchZoom.call(this, currentDistance, this.pinchStartDistance);\n  if (checkIfInfinite(newScale) || newScale === scale) return; // Get new element sizes to calculate bounds\n\n  var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper); // Calculate transformations\n\n  var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds),\n      x = _e.x,\n      y = _e.y;\n\n  this.lastDistance = currentDistance;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.previousScale = scale; // update component transformation\n\n  this.applyTransformation();\n}\n\nvar throttleTime = 30;\n\nfunction velocityTimeSpeed(speed, animationTime) {\n  var velocityEqualToMove = this.stateProvider.pan.velocityEqualToMove;\n\n  if (velocityEqualToMove) {\n    return animationTime - animationTime / Math.max(1, speed);\n  }\n\n  return animationTime;\n}\n\nfunction handleEnableVelocity() {\n  this.setState({\n    startAnimation: false\n  });\n}\n\nfunction handleFireVelocity() {\n  this.setState({\n    startAnimation: true\n  });\n}\n\nfunction animateVelocity() {\n  var _this = this;\n\n  var _a = this.stateProvider,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      limitToBounds = _a.options.limitToBounds,\n      _b = _a.pan,\n      velocityBaseTime = _b.velocityBaseTime,\n      lockAxisX = _b.lockAxisX,\n      lockAxisY = _b.lockAxisY,\n      velocityAnimationType = _b.velocityAnimationType,\n      panReturnAnimationTime = _b.panReturnAnimationTime,\n      panReturnAnimationType = _b.panReturnAnimationType,\n      padding = _b.padding,\n      paddingSize = _b.paddingSize,\n      wrapperComponent = _a.wrapperComponent;\n  if (!this.mounted) return;\n  if (!this.velocity || !this.bounds) return handleDisableAnimation.call(this);\n  var _c = this.bounds,\n      maxPositionX = _c.maxPositionX,\n      minPositionX = _c.minPositionX,\n      maxPositionY = _c.maxPositionY,\n      minPositionY = _c.minPositionY;\n  var _d = this.velocity,\n      velocityX = _d.velocityX,\n      velocityY = _d.velocityY,\n      velocity = _d.velocity;\n  var animationTime = velocityTimeSpeed.call(this, velocity, velocityBaseTime);\n\n  if (!animationTime) {\n    handlePanningAnimation.call(this);\n    return;\n  }\n\n  var targetX = velocityX;\n  var targetY = velocityY; // pan return animation\n\n  var newAnimationTime = animationTime > panReturnAnimationTime ? animationTime : panReturnAnimationTime;\n  var paddingValue = padding ? paddingSize : 0;\n  var paddingX = wrapperComponent ? paddingValue * wrapperComponent.offsetWidth / 100 : 0;\n  var paddingY = wrapperComponent ? paddingValue * wrapperComponent.offsetHeight / 100 : 0;\n  var maxTargetX = maxPositionX + paddingX;\n  var minTargetX = minPositionX - paddingX;\n  var maxTargetY = maxPositionY + paddingY;\n  var minTargetY = minPositionY - paddingY;\n  var startPosition = checkPositionBounds(positionX, positionY, this.bounds, limitToBounds, paddingValue, wrapperComponent);\n  var startTime = new Date().getTime(); // animation start timestamp\n\n  animate.call(this, velocityAnimationType, newAnimationTime, function (step) {\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / panReturnAnimationTime;\n    var returnAnimation = availableAnimations[panReturnAnimationType];\n    var customReturnStep = returnAnimation(animationProgress);\n    if (frameTime > panReturnAnimationTime || customReturnStep > 1 || customReturnStep === Infinity || customReturnStep === -Infinity) customReturnStep = 1;\n    var currentPositionX = getPosition(lockAxisX, targetX, step, customReturnStep, minPositionX, maxPositionX, limitToBounds, positionX, startPosition.x, minTargetX, maxTargetX);\n    var currentPositionY = getPosition(lockAxisY, targetY, step, customReturnStep, minPositionY, maxPositionY, limitToBounds, positionY, startPosition.y, minTargetY, maxTargetY);\n\n    if (positionX !== currentPositionX || positionY !== currentPositionY) {\n      // Save panned position\n      _this.stateProvider.positionX = currentPositionX;\n      _this.stateProvider.positionY = currentPositionY; // apply animation changes\n\n      _this.applyTransformation();\n    }\n  });\n}\n\nfunction calculateVelocityStart(event) {\n  var _this = this;\n\n  var _a = this.stateProvider,\n      scale = _a.scale,\n      disabled = _a.options.disabled,\n      _b = _a.pan,\n      velocity = _b.velocity,\n      velocitySensitivity = _b.velocitySensitivity,\n      velocityActiveScale = _b.velocityActiveScale,\n      velocityMinSpeed = _b.velocityMinSpeed,\n      wrapperComponent = _a.wrapperComponent;\n  if (!velocity || velocityActiveScale >= scale || disabled) return;\n  handleEnableVelocity.call(this);\n  var now = Date.now();\n\n  if (this.lastMousePosition) {\n    var position_1 = getClientPosition(event);\n    if (!position_1) return console.error(\"No mouse or touch position detected\");\n    var clientX = position_1.clientX,\n        clientY = position_1.clientY;\n    var distanceX = clientX - this.lastMousePosition.clientX;\n    var distanceY = clientY - this.lastMousePosition.clientY;\n    var interval = now - this.velocityTime;\n    var wrapperToWindowScaleX = 2 - wrapperComponent.offsetWidth / window.innerWidth;\n    var wrapperToWindowScaleY = 2 - wrapperComponent.offsetHeight / window.innerHeight;\n    var scaledX = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleX));\n    var scaledY = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleY));\n    var velocityX = distanceX / interval * velocitySensitivity * scale * scaledX;\n    var velocityY = distanceY / interval * velocitySensitivity * scale * scaledY;\n    var speed = distanceX * distanceX + distanceY * distanceY;\n    var velocity_1 = Math.sqrt(speed) / interval * velocitySensitivity;\n    if (this.velocity && velocity_1 < this.velocity.velocity && this.throttle) return;\n    this.velocity = {\n      velocityX: velocityX,\n      velocityY: velocityY,\n      velocity: velocity_1\n    }; // throttling\n\n    if (this.throttle) clearTimeout(this.throttle);\n    this.throttle = setTimeout(function () {\n      if (_this.mounted) _this.throttle = false;\n    }, throttleTime);\n  }\n\n  var position = getClientPosition(event);\n  this.lastMousePosition = position;\n  this.velocityTime = now;\n}\n\nfunction getPosition(isLocked, target, step, panReturnStep, minBound, maxBound, limitToBounds, offset, startPosition, minTarget, maxTarget) {\n  if (limitToBounds) {\n    if (startPosition > minBound && offset > maxBound) {\n      var newPosition = startPosition - (startPosition - maxBound) * panReturnStep;\n      if (newPosition > maxTarget) return maxTarget;\n      if (newPosition < maxBound) return maxBound;\n      return newPosition;\n    }\n\n    if (startPosition < minBound && offset < minBound) {\n      var newPosition = startPosition - (startPosition - minBound) * panReturnStep;\n      if (newPosition < minTarget) return minTarget;\n      if (newPosition > minBound) return minBound;\n      return newPosition;\n    }\n  }\n\n  if (isLocked) return startPosition;\n  var offsetPosition = offset + target * step;\n  return boundLimiter(offsetPosition, minBound, maxBound, limitToBounds);\n} // We want to make event listeners non-passive, and to do so have to check\n\n\nfunction makePassiveEventOption(passive) {\n  return passive;\n}\n\nvar propsList = [\"previousScale\", \"scale\", \"positionX\", \"positionY\", \"defaultPositionX\", \"defaultPositionY\", \"defaultScale\", \"onWheelStart\", \"onWheel\", \"onWheelStop\", \"onPanningStart\", \"onPanning\", \"onPanningStop\", \"onPinchingStart\", \"onPinching\", \"onPinchingStop\", \"onZoomChange\", \"options\", \"wheel\", \"scalePadding\", \"pan\", \"pinch\", \"zoomIn\", \"zoomOut\", \"doubleClick\", \"reset\"];\n\nvar getValidPropsFromObject = function (props) {\n  return Object.keys(props).reduce(function (acc, key) {\n    if (propsList.includes(key)) {\n      acc[key] = props[key];\n    }\n\n    return acc;\n  }, {});\n};\n\nvar Context = React.createContext({});\nvar wheelStopEventTimer = null;\nvar wheelStopEventTime = 180;\nvar wheelAnimationTimer = null;\nvar wheelAnimationTime = 100;\n\nvar StateProvider =\n/** @class */\nfunction (_super) {\n  __extends(StateProvider, _super);\n\n  function StateProvider() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.mounted = true;\n    _this.state = {\n      wrapperComponent: undefined,\n      contentComponent: undefined\n    };\n    _this.stateProvider = __assign(__assign(__assign(__assign({}, initialState), mergeProps(initialState, _this.props.dynamicValues)), _this.props.defaultValues), {\n      previousScale: _this.props.dynamicValues.scale || _this.props.defaultValues.scale || initialState.scale\n    });\n    _this.windowToWrapperScaleX = 0;\n    _this.windowToWrapperScaleY = 0; // panning helpers\n\n    _this.startCoords = null;\n    _this.isDown = false; // pinch helpers\n\n    _this.pinchStartDistance = null;\n    _this.lastDistance = null;\n    _this.pinchStartScale = null;\n    _this.distance = null;\n    _this.bounds = null; // velocity helpers\n\n    _this.velocityTime = null;\n    _this.lastMousePosition = null;\n    _this.velocity = null;\n    _this.offsetX = null;\n    _this.offsetY = null;\n    _this.throttle = false; // wheel helpers\n\n    _this.previousWheelEvent = null;\n    _this.lastScale = null; // animations helpers\n\n    _this.animate = null;\n    _this.animation = null;\n    _this.maxBounds = null; //////////\n    // Wheel\n    //////////\n\n    _this.handleWheel = function (event) {\n      var _a = _this.stateProvider,\n          scale = _a.scale,\n          _b = _a.wheel,\n          disabled = _b.disabled,\n          wheelEnabled = _b.wheelEnabled,\n          touchPadEnabled = _b.touchPadEnabled;\n      var _c = _this.props,\n          onWheelStart = _c.onWheelStart,\n          onWheel = _c.onWheel,\n          onWheelStop = _c.onWheelStop;\n      var _d = _this.state,\n          wrapperComponent = _d.wrapperComponent,\n          contentComponent = _d.contentComponent;\n      if (_this.isDown || disabled || _this.stateProvider.options.disabled || !wrapperComponent || !contentComponent) return; // ctrlKey detects if touchpad execute wheel or pinch gesture\n\n      if (!wheelEnabled && !event.ctrlKey) return;\n      if (!touchPadEnabled && event.ctrlKey) return; // Wheel start event\n\n      if (!wheelStopEventTimer) {\n        _this.lastScale = scale;\n        handleDisableAnimation.call(_this);\n        handleCallback(onWheelStart, _this.getCallbackProps());\n      } // Wheel event\n\n\n      handleWheelZoom.call(_this, event);\n      handleCallback(onWheel, _this.getCallbackProps());\n\n      _this.applyTransformation(null, null, null);\n\n      _this.previousWheelEvent = event; // Wheel stop event\n\n      if (handleWheelStop(_this.previousWheelEvent, event, _this.stateProvider)) {\n        clearTimeout(wheelStopEventTimer);\n        wheelStopEventTimer = setTimeout(function () {\n          if (!_this.mounted) return;\n          handleCallback(onWheelStop, _this.getCallbackProps());\n          wheelStopEventTimer = null;\n        }, wheelStopEventTime);\n      } // cancel animation\n\n\n      _this.animate = false; // fire animation\n\n      _this.lastScale = _this.stateProvider.scale;\n      clearTimeout(wheelAnimationTimer);\n      wheelAnimationTimer = setTimeout(function () {\n        if (!_this.mounted) return;\n        handlePaddingAnimation$1.call(_this, event);\n      }, wheelAnimationTime);\n    }; //////////\n    // Panning\n    //////////\n\n\n    _this.checkPanningTarget = function (event) {\n      var disableOnTarget = _this.stateProvider.pan.disableOnTarget;\n      return disableOnTarget.map(function (tag) {\n        return tag.toUpperCase();\n      }).includes(event.target.tagName) || disableOnTarget.find(function (element) {\n        return event.target.classList.value.includes(element);\n      });\n    };\n\n    _this.checkIsPanningActive = function (event) {\n      var disabled = _this.stateProvider.pan.disabled;\n      var _a = _this.state,\n          wrapperComponent = _a.wrapperComponent,\n          contentComponent = _a.contentComponent;\n      return !_this.isDown || disabled || _this.stateProvider.options.disabled || event.touches && (event.touches.length !== 1 || Math.abs(_this.startCoords.x - event.touches[0].clientX) < 1 || Math.abs(_this.startCoords.y - event.touches[0].clientY) < 1) || !wrapperComponent || !contentComponent;\n    };\n\n    _this.handleSetUpPanning = function (x, y) {\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY;\n      _this.isDown = true;\n      _this.startCoords = {\n        x: x - positionX,\n        y: y - positionY\n      };\n      handleCallback(_this.props.onPanningStart, _this.getCallbackProps());\n    };\n\n    _this.handleStartPanning = function (event) {\n      var _a = _this.stateProvider,\n          wrapperComponent = _a.wrapperComponent,\n          scale = _a.scale,\n          _b = _a.options,\n          minScale = _b.minScale,\n          maxScale = _b.maxScale,\n          limitToWrapper = _b.limitToWrapper,\n          disabled = _a.pan.disabled;\n      var target = event.target,\n          touches = event.touches;\n      if (disabled || _this.stateProvider.options.disabled || wrapperComponent && !wrapperComponent.contains(target) || _this.checkPanningTarget(event) || scale < minScale || scale > maxScale) return;\n      handleDisableAnimation.call(_this);\n      _this.bounds = handleCalculateBounds.call(_this, scale, limitToWrapper); // Mobile points\n\n      if (touches && touches.length === 1) {\n        _this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\n      } // Desktop points\n\n\n      if (!touches) {\n        _this.handleSetUpPanning(event.clientX, event.clientY);\n      }\n    };\n\n    _this.handlePanning = function (event) {\n      if (_this.isDown) event.preventDefault();\n      if (_this.checkIsPanningActive(event)) return;\n      event.stopPropagation();\n      calculateVelocityStart.call(_this, event);\n      handlePanning.call(_this, event);\n      handleCallback(_this.props.onPanning, _this.getCallbackProps());\n    };\n\n    _this.handleStopPanning = function () {\n      if (_this.isDown) {\n        _this.isDown = false;\n        _this.animate = false;\n        _this.animation = false;\n        handleFireVelocity.call(_this);\n        handleCallback(_this.props.onPanningStop, _this.getCallbackProps());\n        var _a = _this.stateProvider,\n            velocity = _a.pan.velocity,\n            scale = _a.scale; // start velocity animation\n\n        if (_this.velocity && velocity && scale > 1) {\n          animateVelocity.call(_this);\n        } else {\n          // fire fit to bounds animation\n          handlePanningAnimation.call(_this);\n        }\n      }\n    }; //////////\n    // Pinch\n    //////////\n\n\n    _this.handlePinchStart = function (event) {\n      var scale = _this.stateProvider.scale;\n      event.preventDefault();\n      event.stopPropagation();\n      handleDisableAnimation.call(_this);\n      var distance = getDistance(event.touches[0], event.touches[1]);\n      _this.pinchStartDistance = distance;\n      _this.lastDistance = distance;\n      _this.pinchStartScale = scale;\n      _this.isDown = false;\n      handleCallback(_this.props.onPinchingStart, _this.getCallbackProps());\n    };\n\n    _this.handlePinch = function (event) {\n      _this.isDown = false;\n      handleZoomPinch.call(_this, event);\n      handleCallback(_this.props.onPinching, _this.getCallbackProps());\n    };\n\n    _this.handlePinchStop = function () {\n      if (typeof _this.pinchStartScale === \"number\") {\n        _this.isDown = false;\n        _this.velocity = null;\n        _this.lastDistance = null;\n        _this.pinchStartScale = null;\n        _this.pinchStartDistance = null;\n        handlePaddingAnimation$1.call(_this);\n        handleCallback(_this.props.onPinchingStop, _this.getCallbackProps());\n      }\n    }; //////////\n    // Touch Events\n    //////////\n\n\n    _this.handleTouchStart = function (event) {\n      var _a = _this.stateProvider,\n          wrapperComponent = _a.wrapperComponent,\n          contentComponent = _a.contentComponent,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          minScale = _b.minScale;\n      var touches = event.touches;\n      if (disabled || !wrapperComponent || !contentComponent || scale < minScale) return;\n      handleDisableAnimation.call(_this);\n      if (touches && touches.length === 1) return _this.handleStartPanning(event);\n      if (touches && touches.length === 2) return _this.handlePinchStart(event);\n    };\n\n    _this.handleTouch = function (event) {\n      var _a = _this.stateProvider,\n          pan = _a.pan,\n          pinch = _a.pinch,\n          options = _a.options;\n      if (options.disabled) return;\n      if (!pan.disabled && event.touches.length === 1) return _this.handlePanning(event);\n      if (!pinch.disabled && event.touches.length === 2) return _this.handlePinch(event);\n    };\n\n    _this.handleTouchStop = function () {\n      _this.handleStopPanning();\n\n      _this.handlePinchStop();\n    }; //////////\n    // Controls\n    //////////\n\n\n    _this.zoomIn = function (event) {\n      var _a = _this.stateProvider,\n          _b = _a.zoomIn,\n          disabled = _b.disabled,\n          step = _b.step,\n          options = _a.options;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Zoom in function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleZoomControls.call(_this, 1, step);\n    };\n\n    _this.zoomOut = function (event) {\n      var _a = _this.stateProvider,\n          _b = _a.zoomOut,\n          disabled = _b.disabled,\n          step = _b.step,\n          options = _a.options;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Zoom out function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleZoomControls.call(_this, -1, step);\n    };\n\n    _this.handleDbClick = function (event) {\n      var _a = _this.stateProvider,\n          options = _a.options,\n          _b = _a.doubleClick,\n          disabled = _b.disabled,\n          step = _b.step;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (!event) throw Error(\"Double click function requires event prop\");\n      if (disabled || options.disabled || !wrapperComponent || !contentComponent) return;\n      handleDoubleClick.call(_this, event, 1, step);\n    };\n\n    _this.setScale = function (newScale, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          disabled = _a.options.disabled;\n      var _b = _this.state,\n          wrapperComponent = _b.wrapperComponent,\n          contentComponent = _b.contentComponent;\n      if (disabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: positionX,\n        positionY: positionY,\n        scale: isNaN(newScale) ? scale : newScale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setPositionX = function (newPosX, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: isNaN(newPosX) ? positionX : newPosX,\n        positionY: positionY,\n        scale: scale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setPositionY = function (newPosY, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          scale = _a.scale,\n          positionY = _a.positionY,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: positionX,\n        positionY: isNaN(newPosY) ? positionY : newPosY,\n        scale: scale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.setTransform = function (newPosX, newPosY, newScale, speed, type) {\n      if (speed === void 0) {\n        speed = 200;\n      }\n\n      if (type === void 0) {\n        type = \"easeOut\";\n      }\n\n      var _a = _this.stateProvider,\n          positionX = _a.positionX,\n          positionY = _a.positionY,\n          scale = _a.scale,\n          _b = _a.options,\n          disabled = _b.disabled,\n          transformEnabled = _b.transformEnabled;\n      var _c = _this.state,\n          wrapperComponent = _c.wrapperComponent,\n          contentComponent = _c.contentComponent;\n      if (disabled || !transformEnabled || !wrapperComponent || !contentComponent) return;\n      var targetState = {\n        positionX: isNaN(newPosX) ? positionX : newPosX,\n        positionY: isNaN(newPosY) ? positionY : newPosY,\n        scale: isNaN(newScale) ? scale : newScale\n      };\n      animateComponent.call(_this, {\n        targetState: targetState,\n        speed: speed,\n        type: type\n      });\n    };\n\n    _this.resetTransform = function () {\n      var _a = _this.stateProvider.options,\n          disabled = _a.disabled,\n          transformEnabled = _a.transformEnabled;\n      if (disabled || !transformEnabled) return;\n      resetTransformations.call(_this);\n    };\n\n    _this.setDefaultState = function () {\n      _this.animation = null;\n      _this.stateProvider = __assign(__assign(__assign({}, _this.stateProvider), {\n        scale: initialState.scale,\n        positionX: initialState.positionX,\n        positionY: initialState.positionY\n      }), _this.props.defaultValues);\n\n      _this.forceUpdate();\n    }; //////////\n    // Setters\n    //////////\n\n\n    _this.setWrapperComponent = function (wrapperComponent) {\n      _this.setState({\n        wrapperComponent: wrapperComponent\n      });\n    };\n\n    _this.setContentComponent = function (contentComponent) {\n      _this.setState({\n        contentComponent: contentComponent\n      }, function () {\n        var _a = _this.stateProvider,\n            wrapperComponent = _a.wrapperComponent,\n            _b = _a.options,\n            centerContent = _b.centerContent,\n            limitToBounds = _b.limitToBounds,\n            limitToWrapper = _b.limitToWrapper,\n            scale = _a.scale;\n        var _c = _this.props.defaultValues,\n            positionX = _c.positionX,\n            positionY = _c.positionY;\n\n        if (limitToBounds && !limitToWrapper || centerContent && !positionX && !positionY) {\n          var transform = \"translate(25%, 25%) scale(\" + scale + \")\";\n          contentComponent.style.transform = transform;\n          contentComponent.style.WebkitTransform = transform; // force update to inject state to the context\n\n          _this.forceUpdate();\n\n          var startTime_1 = new Date().getTime();\n          var maxTimeWait_1 = 2000;\n          var interval_1 = setInterval(function () {\n            if (wrapperComponent.offsetWidth) {\n              var bounds = handleCalculateBounds.call(_this, scale, false);\n              _this.stateProvider.positionX = bounds.minPositionX;\n              _this.stateProvider.positionY = bounds.minPositionY;\n\n              _this.applyTransformation(null, null, null);\n\n              clearInterval(interval_1);\n              interval_1 = null;\n            } else if (new Date().getTime() - startTime_1 > maxTimeWait_1) {\n              clearInterval(interval_1);\n              interval_1 = null;\n            }\n          }, 20);\n        } else {\n          _this.applyTransformation(null, null, null);\n        }\n      });\n    };\n\n    _this.applyTransformation = function (newScale, posX, posY) {\n      if (!_this.mounted) return;\n      var contentComponent = _this.state.contentComponent;\n      var onZoomChange = _this.props.onZoomChange;\n      var _a = _this.stateProvider,\n          previousScale = _a.previousScale,\n          scale = _a.scale,\n          positionX = _a.positionX,\n          positionY = _a.positionY;\n      if (!contentComponent) return console.error(\"There is no content component\");\n      var transform = \"translate(\" + (posX || positionX) + \"px, \" + (posY || positionY) + \"px) scale(\" + (newScale || scale) + \")\";\n      contentComponent.style.transform = transform;\n      contentComponent.style.WebkitTransform = transform; // force update to inject state to the context\n\n      _this.forceUpdate();\n\n      if (onZoomChange && previousScale !== scale) {\n        handleCallback(onZoomChange, _this.getCallbackProps());\n      }\n    }; //////////\n    // Props\n    //////////\n\n\n    _this.getCallbackProps = function () {\n      return getValidPropsFromObject(_this.stateProvider);\n    };\n\n    return _this;\n  }\n\n  StateProvider.prototype.componentDidMount = function () {\n    var passiveOption = makePassiveEventOption(false); // Panning on window to allow panning when mouse is out of wrapper\n\n    window.addEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n    window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n  };\n\n  StateProvider.prototype.componentWillUnmount = function () {\n    var passiveOption = makePassiveEventOption(false);\n    window.removeEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n    window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.removeEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n    handleDisableAnimation.call(this);\n  };\n\n  StateProvider.prototype.componentDidUpdate = function (oldProps, oldState) {\n    var _a = this.state,\n        wrapperComponent = _a.wrapperComponent,\n        contentComponent = _a.contentComponent;\n    var dynamicValues = this.props.dynamicValues;\n\n    if (!oldState.contentComponent && contentComponent) {\n      this.stateProvider.contentComponent = contentComponent;\n    }\n\n    if (!oldState.wrapperComponent && wrapperComponent && wrapperComponent !== undefined) {\n      this.stateProvider.wrapperComponent = wrapperComponent;\n      this.windowToWrapperScaleX = getWindowScaleX(wrapperComponent);\n      this.windowToWrapperScaleY = getWindowScaleY(wrapperComponent); // Zooming events on wrapper\n\n      var passiveOption = makePassiveEventOption(false);\n      wrapperComponent.addEventListener(\"wheel\", this.handleWheel, passiveOption);\n      wrapperComponent.addEventListener(\"dblclick\", this.handleDbClick, passiveOption);\n      wrapperComponent.addEventListener(\"touchstart\", this.handleTouchStart, passiveOption);\n      wrapperComponent.addEventListener(\"touchmove\", this.handleTouch, passiveOption);\n      wrapperComponent.addEventListener(\"touchend\", this.handleTouchStop, passiveOption);\n    } // set bound for animations\n\n\n    if (wrapperComponent && contentComponent || oldProps.dynamicValues !== dynamicValues) {\n      this.maxBounds = handleCalculateBounds.call(this, this.stateProvider.scale, this.stateProvider.options.limitToWrapper);\n    } // must be at the end of the update function, updates\n\n\n    if (oldProps.dynamicValues && oldProps.dynamicValues !== dynamicValues) {\n      this.animation = null;\n      this.stateProvider = __assign(__assign({}, this.stateProvider), mergeProps(this.stateProvider, dynamicValues));\n      this.applyTransformation(null, null, null);\n    }\n  };\n\n  StateProvider.prototype.render = function () {\n    var _a = this.state,\n        wrapperComponent = _a.wrapperComponent,\n        contentComponent = _a.contentComponent;\n    /**\r\n     * Context provider value\r\n     */\n\n    var value = {\n      loaded: Boolean(wrapperComponent && contentComponent),\n      state: this.getCallbackProps(),\n      dispatch: {\n        setScale: this.setScale,\n        setPositionX: this.setPositionX,\n        setPositionY: this.setPositionY,\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        setTransform: this.setTransform,\n        resetTransform: this.resetTransform,\n        setDefaultState: this.setDefaultState\n      },\n      nodes: {\n        setWrapperComponent: this.setWrapperComponent,\n        setContentComponent: this.setContentComponent\n      }\n    };\n    var children = this.props.children;\n    var content = typeof children === \"function\" ? children(__assign(__assign({}, value.state), value.dispatch)) : children;\n    return React.createElement(Context.Provider, {\n      value: value\n    }, content);\n  };\n\n  return StateProvider;\n}(Component);\n\nvar TransformWrapper = function (_a) {\n  var children = _a.children,\n      defaultPositionX = _a.defaultPositionX,\n      defaultPositionY = _a.defaultPositionY,\n      defaultScale = _a.defaultScale,\n      onWheelStart = _a.onWheelStart,\n      onWheel = _a.onWheel,\n      onWheelStop = _a.onWheelStop,\n      onPanningStart = _a.onPanningStart,\n      onPanning = _a.onPanning,\n      onPanningStop = _a.onPanningStop,\n      onPinchingStart = _a.onPinchingStart,\n      onPinching = _a.onPinching,\n      onPinchingStop = _a.onPinchingStop,\n      onZoomChange = _a.onZoomChange,\n      rest = __rest(_a, [\"children\", \"defaultPositionX\", \"defaultPositionY\", \"defaultScale\", \"onWheelStart\", \"onWheel\", \"onWheelStop\", \"onPanningStart\", \"onPanning\", \"onPanningStop\", \"onPinchingStart\", \"onPinching\", \"onPinchingStop\", \"onZoomChange\"]);\n\n  var props = __assign({}, rest);\n\n  if (props.options && props.options.limitToWrapper) {\n    props.options.limitToBounds = true;\n  }\n\n  return React.createElement(StateProvider, {\n    defaultValues: deleteUndefinedProps({\n      positionX: defaultPositionX,\n      positionY: defaultPositionY,\n      scale: defaultScale\n    }),\n    dynamicValues: deleteUndefinedProps(getValidPropsFromObject(props)),\n    onWheelStart: onWheelStart,\n    onWheel: onWheel,\n    onWheelStop: onWheelStop,\n    onPanningStart: onPanningStart,\n    onPanning: onPanning,\n    onPanningStop: onPanningStop,\n    onPinchingStart: onPinchingStart,\n    onPinching: onPinching,\n    onPinchingStop: onPinchingStop,\n    onZoomChange: onZoomChange\n  }, children);\n};\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".TransformComponent-module_container__3NwNd {\\n  position: relative;\\n  width: fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n}\\n.TransformComponent-module_content__TZU5O {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.TransformComponent-module_content__TZU5O img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\n  \"container\": \"TransformComponent-module_container__3NwNd\",\n  \"content\": \"TransformComponent-module_content__TZU5O\"\n};\nstyleInject(css);\n\nvar TransformComponent =\n/** @class */\nfunction (_super) {\n  __extends(TransformComponent, _super);\n\n  function TransformComponent() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.wrapperRef = React.createRef();\n    _this.contentRef = React.createRef();\n    return _this;\n  }\n\n  TransformComponent.prototype.componentDidMount = function () {\n    var nodes = this.context.nodes;\n    nodes.setWrapperComponent(this.wrapperRef.current);\n    nodes.setContentComponent(this.contentRef.current);\n  };\n\n  TransformComponent.prototype.render = function () {\n    var children = this.props.children;\n    var _a = this.context.state,\n        positionX = _a.positionX,\n        positionY = _a.positionY,\n        scale = _a.scale,\n        _b = _a.options,\n        wrapperClass = _b.wrapperClass,\n        contentClass = _b.contentClass;\n    var style = {\n      WebkitTransform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\",\n      transform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\"\n    };\n    return React.createElement(\"div\", {\n      ref: this.wrapperRef,\n      className: \"react-transform-component \" + styles.container + \" \" + wrapperClass\n    }, React.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"react-transform-element \" + styles.content + \" \" + contentClass,\n      style: style\n    }, children));\n  };\n\n  return TransformComponent;\n}(React.Component);\n\nTransformComponent.contextType = Context;\nexport { TransformComponent, TransformWrapper };","map":{"version":3,"sources":["../node_modules/tslib/tslib.es6.js","../src/store/InitialState.ts","../src/store/utils.ts","../src/store/animations/utils.ts","../src/store/animations/index.ts","../src/store/zoom/utils.ts","../src/store/pan/index.ts","../src/store/zoom/index.ts","../src/store/pinch/index.ts","../src/store/velocity/index.ts","../src/store/makePassiveEventOption.ts","../src/store/propsHandlers.ts","../src/store/StateContext.tsx","../src/components/TransformWrapper.tsx","../node_modules/style-inject/dist/style-inject.es.js","../src/components/TransformComponent.tsx"],"names":["handlePaddingAnimation"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export const initialState = {\n  wrapperComponent: null,\n  contentComponent: null,\n  previousScale: 1,\n  scale: 1,\n  positionX: 0,\n  positionY: 0,\n  options: {\n    disabled: false,\n    transformEnabled: true,\n    minPositionX: null,\n    maxPositionX: null,\n    minPositionY: null,\n    maxPositionY: null,\n    minScale: 1,\n    maxScale: 8,\n    limitToBounds: true,\n    limitToWrapper: false,\n    centerContent: true,\n    wrapperClass: \"\",\n    contentClass: \"\",\n  },\n  wheel: {\n    disabled: false,\n    step: 5,\n    wheelEnabled: true,\n    touchPadEnabled: true,\n    limitsOnWheel: false,\n  },\n  pan: {\n    disabled: false,\n    panAnimationType: \"linear\",\n    lockAxisX: false,\n    lockAxisY: false,\n    velocity: true,\n    velocityEqualToMove: true,\n    velocitySensitivity: 2,\n    velocityActiveScale: 1,\n    velocityMinSpeed: 1,\n    velocityBaseTime: 1600,\n    velocityAnimationType: \"easeOutQuart\",\n    padding: true,\n    paddingSize: 30,\n    panReturnAnimationTime: 400,\n    panReturnAnimationType: \"easeOut\",\n    disableOnTarget: [],\n  },\n  pinch: {\n    disabled: false,\n  },\n  zoomIn: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  zoomOut: {\n    disabled: false,\n    step: 20,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  doubleClick: {\n    disabled: false,\n    step: 20,\n    mode: \"zoomIn\",\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  reset: {\n    disabled: false,\n    animation: true,\n    animationType: \"easeOut\",\n    animationTime: 200,\n  },\n  scalePadding: {\n    disabled: false,\n    size: 0.2,\n    animationTime: 200,\n    animationType: \"easeOut\",\n  },\n};\n","/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nexport const roundNumber = (num, decimal) => {\n  return Number(num.toFixed(decimal));\n};\n\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nexport const checkIsNumber = (num, defaultValue) => {\n  return typeof num === \"number\" ? num : defaultValue;\n};\n\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nexport const boundLimiter = (value, minBound, maxBound, isActive) => {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\n\n/**\n * Returns relative coords of mouse on wrapper element, and provides\n * info about it's width, height, with same info about its content(zoomed component) element\n */\nexport const relativeCoords = (\n  event,\n  wrapperComponent,\n  contentComponent,\n  panningCase,\n) => {\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const contentRect = contentComponent.getBoundingClientRect();\n  const contentWidth = contentRect.width;\n  const contentHeight = contentRect.height;\n  const contentLeft = contentRect.left;\n  const contentRight = contentRect.right;\n  const diffHeight = wrapperHeight - contentHeight;\n  const diffWidth = wrapperWidth - contentWidth;\n\n  // mouse position x, y over wrapper component\n  let x = panningCase ? event.clientX : event.clientX - contentRect.left;\n  let y = panningCase ? event.clientY : event.clientY - contentRect.top;\n\n  // Mobile touch event case\n  if (isNaN(x) && event.touches && event.touches[0]) {\n    x = event.touches[0].clientX;\n    y = event.touches[0].clientY;\n  }\n\n  return {\n    x,\n    y,\n    wrapperWidth,\n    wrapperHeight,\n    contentWidth,\n    contentHeight,\n    diffHeight,\n    diffWidth,\n    contentLeft,\n    contentRight,\n  };\n};\n\n/**\n * Calculate bounding area of zoomed/panned element\n */\nexport const calculateBoundingArea = (\n  wrapperWidth,\n  newContentWidth,\n  diffWidth,\n  wrapperHeight,\n  newContentHeight,\n  diffHeight,\n  limitToWrapper,\n) => {\n  const scaleWidthFactor =\n    wrapperWidth > newContentWidth\n      ? diffWidth * (limitToWrapper ? 1 : 0.5)\n      : 0;\n  const scaleHeightFactor =\n    wrapperHeight > newContentHeight\n      ? diffHeight * (limitToWrapper ? 1 : 0.5)\n      : 0;\n\n  const minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n  const maxPositionX = scaleWidthFactor;\n  const minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n  const maxPositionY = scaleHeightFactor;\n\n  return { minPositionX, maxPositionX, minPositionY, maxPositionY };\n};\n\n/**\n * Returns middle coordinates x,y of two points\n * Used to get middle point of two fingers pinch\n */\n\nexport const getMiddleCoords = (\n  firstPoint,\n  secondPoint,\n  contentComponent,\n  scale,\n) => {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  return {\n    x:\n      ((firstPoint.clientX + secondPoint.clientX) / 2 - contentRect.left) /\n      scale,\n    y:\n      ((firstPoint.clientY + secondPoint.clientY) / 2 - contentRect.top) /\n      scale,\n  };\n};\n\n/**\n * Returns middle position of PageX for touch events\n */\nexport const getMidPagePosition = (firstPoint, secondPoint) => {\n  if (!firstPoint || !secondPoint)\n    return console.warn(\"There are no points provided\");\n  return {\n    x: (firstPoint.clientX + secondPoint.clientX) / 2,\n    y: (firstPoint.clientY + secondPoint.clientY) / 2,\n  };\n};\n\n/**\n * Returns distance between two points x,y\n */\nexport const getDistance = (firstPoint, secondPoint) => {\n  return Math.sqrt(\n    Math.pow(firstPoint.pageX - secondPoint.pageX, 2) +\n      Math.pow(firstPoint.pageY - secondPoint.pageY, 2),\n  );\n};\n\n/**\n * Delete undefined values from object keys\n * Used for deleting empty props\n */\n\nexport const deleteUndefinedProps = value => {\n  let newObject = { ...value };\n  Object.keys(newObject).forEach(\n    key => newObject[key] === undefined && delete newObject[key],\n  );\n  return newObject;\n};\n\n/**\n * Returns center zoom position, for computations, based on the relative center to content node\n */\n\nexport const getRelativeZoomCoords = ({\n  wrapperComponent,\n  contentComponent,\n  scale,\n  positionX,\n  positionY,\n}) => {\n  const { wrapperWidth, wrapperHeight } = relativeCoords(\n    event,\n    wrapperComponent,\n    contentComponent,\n    true,\n  );\n  const x = (Math.abs(positionX) + wrapperWidth / 2) / scale;\n  const y = (Math.abs(positionY) + wrapperHeight / 2) / scale;\n  return { x, y };\n};\n\n/**\n * Fire callback if it's function\n */\n\nexport const handleCallback = (callback, props) => {\n  if (callback && typeof callback === \"function\") {\n    callback(props);\n  }\n};\n\nexport const handleWheelStop = (previousEvent, event, stateProvider) => {\n  const {\n    scale,\n    options: { maxScale, minScale },\n  } = stateProvider;\n  if (!previousEvent) return false;\n  if (scale < maxScale || scale > minScale) return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  if (previousEvent.deltaY > 0 && previousEvent.deltaY < event.deltaY)\n    return true;\n  if (previousEvent.deltaY < 0 && previousEvent.deltaY > event.deltaY)\n    return true;\n  if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  return false;\n};\n\nexport const mergeProps = (initialState, dynamicProps) => {\n  return Object.keys(initialState).reduce((acc, curr) => {\n    if (typeof dynamicProps[curr] === \"object\" && dynamicProps[curr] !== null) {\n      acc[curr] = { ...initialState[curr], ...dynamicProps[curr] };\n    } else {\n      acc[curr] =\n        dynamicProps[curr] === undefined\n          ? initialState[curr]\n          : dynamicProps[curr];\n    }\n    return acc;\n  }, {});\n};\n\nexport function getWindowScaleY(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerHeight / wrapper.offsetHeight;\n}\n\nexport function getWindowScaleX(wrapper) {\n  if (!wrapper) return 0;\n  return window.innerWidth / wrapper.offsetWidth;\n}\n","/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nconst easeOut = function(t) {\n  return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nconst linear = function(t) {\n  return t;\n};\n// accelerating from zero velocity\nconst easeInQuad = function(t) {\n  return t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuad = function(t) {\n  return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuad = function(t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nconst easeInCubic = function(t) {\n  return t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutCubic = function(t) {\n  return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutCubic = function(t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nconst easeInQuart = function(t) {\n  return t * t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuart = function(t) {\n  return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuart = function(t) {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nconst easeInQuint = function(t) {\n  return t * t * t * t * t;\n};\n// decelerating to zero velocity\nconst easeOutQuint = function(t) {\n  return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nconst easeInOutQuint = function(t) {\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\n\nexport const availableAnimations = {\n  easeOut,\n  linear,\n  easeInQuad,\n  easeOutQuad,\n  easeInOutQuad,\n  easeInCubic,\n  easeOutCubic,\n  easeInOutCubic,\n  easeInQuart,\n  easeOutQuart,\n  easeInOutQuart,\n  easeInQuint,\n  easeOutQuint,\n  easeInOutQuint,\n};\n","import { availableAnimations } from \"./utils\";\n\nexport function handleDisableAnimation() {\n  if (!this.mounted) return;\n  if (this.animation) {\n    cancelAnimationFrame(this.animation);\n  }\n  this.animate = false;\n  this.animation = false;\n  this.velocity = false;\n}\n\nexport function animate(animationName, animationTime, callback) {\n  if (!this.mounted) return;\n  const startTime = new Date().getTime();\n  const lastStep = 1;\n\n  // if another animation is active\n  handleDisableAnimation.call(this);\n\n  // new animation\n  this.animation = () => {\n    if (!this.animation || !this.mounted) return;\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / animationTime;\n    const animationType = availableAnimations[animationName];\n\n    const step = animationType(animationProgress);\n\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      this.animation = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(this.animation);\n    }\n  };\n\n  requestAnimationFrame(this.animation);\n}\n\nexport function animateComponent({ targetState, speed, type }) {\n  const { scale, positionX, positionY } = this.stateProvider;\n\n  const scaleDiff = targetState.scale - scale;\n  const positionXDiff = targetState.positionX - positionX;\n  const positionYDiff = targetState.positionY - positionY;\n\n  if (speed === 0) {\n    this.stateProvider.previousScale = this.stateProvider.scale;\n    this.stateProvider.scale = targetState.scale;\n    this.stateProvider.positionX = targetState.positionX;\n    this.stateProvider.positionY = targetState.positionY;\n    this.applyTransformation();\n  } else {\n    // animation start timestamp\n    animate.call(this, type, speed, step => {\n      this.stateProvider.previousScale = this.stateProvider.scale;\n      this.stateProvider.scale = scale + scaleDiff * step;\n      this.stateProvider.positionX = positionX + positionXDiff * step;\n      this.stateProvider.positionY = positionY + positionYDiff * step;\n\n      // apply animation changes\n      this.applyTransformation();\n    });\n  }\n}\n","import { boundLimiter, checkIsNumber } from \"../utils\";\n\nexport function checkZoomBounds(\n  zoom,\n  minScale,\n  maxScale,\n  zoomPadding,\n  enablePadding,\n) {\n  const scalePadding = enablePadding ? zoomPadding : 0;\n  const minScaleWithPadding = minScale - scalePadding;\n\n  if (!isNaN(maxScale) && zoom >= maxScale) return maxScale;\n  if (!isNaN(minScale) && zoom <= minScaleWithPadding)\n    return minScaleWithPadding;\n  return zoom;\n}\n\nexport function checkPositionBounds(\n  positionX,\n  positionY,\n  bounds,\n  limitToBounds,\n  paddingValue,\n  wrapperComponent,\n) {\n  const { minPositionX, minPositionY, maxPositionX, maxPositionY } = bounds;\n  const paddingX = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetWidth) / 100\n    : 0;\n  const paddingY = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetHeight) / 100\n    : 0;\n\n  const x = boundLimiter(\n    positionX,\n    minPositionX - paddingX,\n    maxPositionX + paddingX,\n    limitToBounds,\n  );\n\n  const y = boundLimiter(\n    positionY,\n    minPositionY - paddingY,\n    maxPositionY + paddingY,\n    limitToBounds,\n  );\n  return { x, y };\n}\n\nexport function getDelta(event, customDelta) {\n  const deltaY = event ? (event.deltaY < 0 ? 1 : -1) : 0;\n  const delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\n\nexport function wheelMousePosition(\n  event,\n  contentComponent,\n  scale,\n): { mouseX: number; mouseY: number } {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  // mouse position x, y over wrapper component\n  const mouseX = (event.clientX - contentRect.left) / scale;\n  const mouseY = (event.clientY - contentRect.top) / scale;\n\n  if (isNaN(mouseX) || isNaN(mouseY))\n    console.error(\"No mouse or touch offset found\");\n\n  return {\n    mouseX,\n    mouseY,\n  };\n}\n\nexport function getComponentsSizes(\n  wrapperComponent,\n  contentComponent,\n  newScale,\n) {\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n\n  const contentWidth = contentComponent.offsetWidth;\n  const contentHeight = contentComponent.offsetHeight;\n\n  const newContentWidth = contentWidth * newScale;\n  const newContentHeight = contentHeight * newScale;\n  const newDiffWidth = wrapperWidth - newContentWidth;\n  const newDiffHeight = wrapperHeight - newContentHeight;\n\n  return {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  };\n}\n\nexport function handleCalculatePositions(\n  mouseX,\n  mouseY,\n  newScale,\n  bounds,\n  limitToBounds,\n) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    options: { transformEnabled },\n  } = this.stateProvider;\n\n  const scaleDifference = newScale - scale;\n\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\")\n    return console.error(\"Mouse X and Y position were not provided!\");\n\n  if (!transformEnabled)\n    return { newPositionX: positionX, newPositionY: positionY };\n\n  const calculatedPositionX = positionX - mouseX * scaleDifference;\n  const calculatedPositionY = positionY - mouseY * scaleDifference;\n\n  // do not limit to bounds when there is padding animation,\n  // it causes animation strange behaviour\n\n  const newPositions = checkPositionBounds(\n    calculatedPositionX,\n    calculatedPositionY,\n    bounds,\n    limitToBounds,\n    0,\n    null,\n  );\n\n  return newPositions;\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { checkPositionBounds, handleCalculatePositions } from \"../zoom/utils\";\nimport { animateComponent } from \"../animations\";\n\nexport function getClientPosition(event) {\n  const { touches } = event;\n\n  // Mobile points\n  if (touches && touches.length === 1) {\n    return { clientX: touches[0].clientX, clientY: touches[0].clientY };\n  }\n  // Desktop points\n  if (!touches) {\n    return { clientX: event.clientX, clientY: event.clientY };\n  }\n  return null;\n}\n\nexport function handlePanning(event) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    options: { limitToBounds, minScale },\n    pan: { lockAxisX, lockAxisY, padding, paddingSize },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  if (!this.startCoords) return;\n  const { x, y } = this.startCoords;\n\n  const positions = getClientPosition(event);\n  if (!positions) return console.error(\"Cannot find mouse client positions\");\n  const { clientX, clientY } = positions;\n\n  // Get Position\n  const mouseX = clientX - x;\n  const mouseY = clientY - y;\n  const newPositionX = lockAxisX ? positionX : mouseX;\n  const newPositionY = lockAxisY ? positionY : mouseY;\n\n  // padding\n  const paddingValue = padding && scale >= minScale ? paddingSize : 0;\n\n  // If position didn't change\n  if (newPositionX === positionX && newPositionY === positionY) return;\n\n  const calculatedPosition = checkPositionBounds(\n    newPositionX,\n    newPositionY,\n    this.bounds,\n    limitToBounds,\n    paddingValue,\n    wrapperComponent,\n  );\n\n  // Save panned position\n  handlePaddingAnimation.call(this, calculatedPosition.x, calculatedPosition.y);\n}\n\nexport function handlePanningAnimation() {\n  const {\n    scale,\n    options: { minScale },\n    pan: { disabled, padding, panReturnAnimationTime, panReturnAnimationType },\n  } = this.stateProvider;\n  const isDisabled = disabled || scale < minScale || !padding;\n\n  if (isDisabled) return;\n\n  const targetState = handlePanToBounds.call(this);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: panReturnAnimationTime,\n    type: panReturnAnimationType,\n  });\n}\n\nexport function handlePanToBounds() {\n  const {\n    positionX,\n    positionY,\n    scale,\n    options: { disabled, limitToBounds, limitToWrapper },\n  } = this.stateProvider;\n  const { wrapperComponent } = this.state;\n  if (disabled) return;\n  const {\n    maxPositionX,\n    minPositionX,\n    maxPositionY,\n    minPositionY,\n  } = this.bounds;\n\n  const xChanged = positionX > maxPositionX || positionX < minPositionX;\n  const yChanged = positionY > maxPositionY || positionY < minPositionY;\n\n  let mouseX =\n    positionX > maxPositionX\n      ? wrapperComponent.offsetWidth\n      : this.stateProvider.minPositionX || 0;\n  let mouseY =\n    positionY > maxPositionY\n      ? wrapperComponent.offsetHeight\n      : this.stateProvider.minPositionY || 0;\n\n  let mousePosX = mouseX;\n  let mousePosY = mouseY;\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mousePosX,\n    mousePosY,\n    scale,\n    this.bounds,\n    limitToBounds || limitToWrapper,\n  );\n\n  return {\n    scale,\n    positionX: xChanged ? x : positionX,\n    positionY: yChanged ? y : positionY,\n  };\n}\n\nfunction handlePaddingAnimation(positionX, positionY) {\n  const {\n    pan: { padding },\n  }: PropsList = this.stateProvider;\n  if (!padding) return;\n  this.stateProvider.positionX = positionX;\n  this.stateProvider.positionY = positionY;\n  this.applyTransformation();\n}\n","import { roundNumber, checkIsNumber, calculateBoundingArea } from \"../utils\";\nimport { animateComponent } from \"../animations\";\nimport { handlePanningAnimation } from \"../pan\";\nimport { initialState } from \"../InitialState\";\nimport {\n  checkZoomBounds,\n  getComponentsSizes,\n  getDelta,\n  wheelMousePosition,\n  handleCalculatePositions,\n} from \"./utils\";\n\nfunction handleCalculateZoom(\n  delta,\n  step,\n  disablePadding,\n  getTarget,\n  isBtnFunction,\n) {\n  const {\n    scale,\n    options: { maxScale, minScale },\n    scalePadding: { size, disabled },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  let targetScale = null;\n\n  if (isBtnFunction) {\n    const scaleFactor = window.innerWidth * 0.0001;\n    const zoomFactor = delta < 0 ? 30 : 20;\n    targetScale =\n      scale + (step - step * scaleFactor) * delta * (scale / zoomFactor);\n  } else {\n    const wrapperToWindowScale =\n      2 - window.innerWidth / wrapperComponent.offsetWidth;\n    const scaleFactor = Math.max(0.2, Math.min(0.99, wrapperToWindowScale));\n    const zoomFactor = 20;\n    targetScale =\n      scale + step * delta * ((scale - scale * scaleFactor) / zoomFactor);\n  }\n\n  if (getTarget) return targetScale;\n  const paddingEnabled = disablePadding ? false : !disabled;\n  const newScale = checkZoomBounds(\n    roundNumber(targetScale, 3),\n    minScale,\n    maxScale,\n    size,\n    paddingEnabled,\n  );\n  return newScale;\n}\n\nexport function handleCalculateBounds(newScale, limitToWrapper) {\n  const { wrapperComponent, contentComponent } = this.stateProvider;\n\n  const {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  } = getComponentsSizes(wrapperComponent, contentComponent, newScale);\n\n  const bounds = calculateBoundingArea(\n    wrapperWidth,\n    newContentWidth,\n    newDiffWidth,\n    wrapperHeight,\n    newContentHeight,\n    newDiffHeight,\n    limitToWrapper,\n  );\n\n  // Save bounds\n  this.bounds = bounds;\n  return bounds;\n}\n\n/**\n * Wheel zoom event\n */\nexport function handleWheelZoom(event) {\n  const {\n    scale,\n    contentComponent,\n    options: { limitToBounds },\n    scalePadding: { size, disabled },\n    wheel: { step, limitsOnWheel },\n  } = this.stateProvider;\n\n  event.preventDefault();\n  event.stopPropagation();\n\n  const delta = getDelta(event, null);\n  const newScale = handleCalculateZoom.call(this, delta, step, !event.ctrlKey);\n\n  // if scale not change\n  if (scale === newScale) return;\n\n  const bounds = handleCalculateBounds.call(this, newScale, !limitsOnWheel);\n\n  const { mouseX, mouseY } = wheelMousePosition(event, contentComponent, scale);\n\n  const isLimitedToBounds =\n    limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mouseX,\n    mouseY,\n    newScale,\n    bounds,\n    isLimitedToBounds,\n  );\n\n  this.bounds = bounds;\n  this.stateProvider.previousScale = scale;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.applyTransformation();\n}\n\n/**\n * Zoom for animations\n */\n\nexport function handleZoomToPoint(isDisabled, scale, mouseX, mouseY, event) {\n  const {\n    contentComponent,\n    options: { disabled, minScale, maxScale, limitToBounds, limitToWrapper },\n  } = this.stateProvider;\n  if (disabled || isDisabled) return;\n\n  const newScale = checkZoomBounds(\n    roundNumber(scale, 2),\n    minScale,\n    maxScale,\n    null,\n    null,\n  );\n  const bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\n\n  let mousePosX = mouseX;\n  let mousePosY = mouseY;\n\n  // if event is present - use it's mouse position\n  if (event) {\n    const mousePosition = wheelMousePosition(event, contentComponent, scale);\n    mousePosX = mousePosition.mouseX;\n    mousePosY = mousePosition.mouseY;\n  }\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mousePosX,\n    mousePosY,\n    newScale,\n    bounds,\n    limitToBounds,\n  );\n\n  return { scale: newScale, positionX: x, positionY: y };\n}\n\nexport function handlePaddingAnimation() {\n  const {\n    scale,\n    wrapperComponent,\n    options: { minScale, limitToBounds },\n    scalePadding: { disabled, animationTime, animationType },\n  } = this.stateProvider;\n  const isDisabled = disabled || scale >= minScale;\n\n  if (scale >= 1 || limitToBounds) {\n    // fire fit to bounds animation\n    handlePanningAnimation.call(this);\n  }\n\n  if (isDisabled) return;\n  let mouseX = wrapperComponent.offsetWidth / 2;\n  let mouseY = wrapperComponent.offsetHeight / 2;\n\n  const targetState = handleZoomToPoint.call(\n    this,\n    false,\n    minScale,\n    mouseX,\n    mouseY,\n    null,\n  );\n\n  animateComponent.call(this, {\n    targetState,\n    speed: animationTime,\n    type: animationType,\n  });\n}\n\n/**\n * Button zoom events\n */\n\nexport function handleDoubleClick(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  const {\n    contentComponent,\n    scale,\n    doubleClick: { disabled, mode, step, animationTime, animationType },\n  } = this.stateProvider;\n\n  if (mode === \"reset\") {\n    return resetTransformations.call(this, event, animationTime);\n  }\n  const delta = mode === \"zoomOut\" ? -1 : 1;\n  const newScale = handleCalculateZoom.call(\n    this,\n    delta,\n    step,\n    undefined,\n    undefined,\n    true,\n  );\n\n  const { mouseX, mouseY } = wheelMousePosition(event, contentComponent, scale);\n  const targetState = handleZoomToPoint.call(\n    this,\n    disabled,\n    newScale,\n    mouseX,\n    mouseY,\n  );\n\n  if (targetState.scale === scale) return;\n  const targetScale = handleCalculateZoom.call(\n    this,\n    delta,\n    step,\n    true,\n    undefined,\n    true,\n  );\n  const time = getButtonAnimationTime(targetScale, newScale, animationTime);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: time,\n    type: animationType,\n  });\n}\n\nexport function handleZoomControls(customDelta, customStep) {\n  const {\n    scale,\n    positionX,\n    positionY,\n    wrapperComponent,\n    zoomIn,\n    zoomOut,\n  } = this.stateProvider;\n\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const mouseX = (wrapperWidth / 2 - positionX) / scale;\n  const mouseY = (wrapperHeight / 2 - positionY) / scale;\n\n  const newScale = handleCalculateZoom.call(\n    this,\n    customDelta,\n    customStep,\n    undefined,\n    undefined,\n    true,\n  );\n  const isZoomIn = newScale > scale;\n  const animationSpeed = isZoomIn\n    ? zoomIn.animationTime\n    : zoomOut.animationTime;\n  const animationType = isZoomIn ? zoomIn.animationType : zoomOut.animationType;\n  const isDisabled = isZoomIn ? zoomIn.disabled : zoomOut.disabled;\n\n  const targetState = handleZoomToPoint.call(\n    this,\n    isDisabled,\n    newScale,\n    mouseX,\n    mouseY,\n  );\n\n  if (targetState.scale === scale) return;\n  const targetScale = handleCalculateZoom.call(\n    this,\n    customDelta,\n    customStep,\n    true,\n    undefined,\n    true,\n  );\n  const time = getButtonAnimationTime(targetScale, newScale, animationSpeed);\n\n  animateComponent.call(this, {\n    targetState,\n    speed: time,\n    type: animationType,\n  });\n}\n\nexport function resetTransformations(animationSpeed) {\n  const {\n    defaultScale,\n    defaultPositionX,\n    defaultPositionY,\n  } = this.props.defaultValues;\n  const {\n    scale,\n    positionX,\n    positionY,\n    reset,\n    options: { disabled, limitToBounds, centerContent, limitToWrapper },\n  } = this.stateProvider;\n  if (disabled || reset.disabled) return;\n  if (\n    scale === defaultScale &&\n    positionX === defaultPositionX &&\n    positionY === defaultPositionY\n  )\n    return;\n\n  const speed =\n    typeof animationSpeed === \"number\" ? animationSpeed : reset.animationTime;\n\n  const targetScale = checkIsNumber(defaultScale, initialState.scale);\n  let newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\n  let newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\n\n  if ((limitToBounds && !limitToWrapper) || centerContent) {\n    const bounds = handleCalculateBounds.call(\n      this,\n      targetScale,\n      limitToWrapper,\n    );\n    newPositionX = bounds.minPositionX;\n    newPositionY = bounds.minPositionY;\n  }\n\n  const targetState = {\n    scale: targetScale,\n    positionX: newPositionX,\n    positionY: newPositionY,\n  };\n\n  animateComponent.call(this, {\n    targetState,\n    speed,\n    type: reset.animationType,\n  });\n}\n\nfunction getButtonAnimationTime(targetScale, newScale, time) {\n  return time * (newScale / targetScale);\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { checkZoomBounds, handleCalculatePositions } from \"../zoom/utils\";\nimport { handleCalculateBounds } from \"../zoom\";\nimport { getDistance, roundNumber } from \"../utils\";\n\nfunction round(number, decimal) {\n  const roundNumber = Math.pow(10, decimal);\n  return Math.round(number * roundNumber) / roundNumber;\n}\n\nfunction getCurrentDistance(event) {\n  return getDistance(event.touches[0], event.touches[1]);\n}\n\nfunction checkIfInfinite(number) {\n  return number === Infinity || number === -Infinity;\n}\n\nexport function calculatePinchZoom(currentDistance, pinchStartDistance) {\n  const {\n    options: { minScale, maxScale },\n    scalePadding: { size, disabled },\n  }: PropsList = this.stateProvider;\n  if (\n    typeof pinchStartDistance !== \"number\" ||\n    typeof currentDistance !== \"number\"\n  )\n    return console.error(\"Pinch touches distance was not provided\");\n\n  if (currentDistance < 0) return;\n  const touchProportion = currentDistance / pinchStartDistance;\n  const scaleDifference = touchProportion * this.pinchStartScale;\n\n  return checkZoomBounds(\n    roundNumber(scaleDifference, 2),\n    minScale,\n    maxScale,\n    size,\n    !disabled,\n  );\n}\n\nexport function calculateMidpoint(event, scale, contentComponent) {\n  const contentRect = contentComponent.getBoundingClientRect();\n  const { touches } = event;\n  const firstPointX = round(touches[0].clientX - contentRect.left, 5);\n  const firstPointY = round(touches[0].clientY - contentRect.top, 5);\n  const secondPointX = round(touches[1].clientX - contentRect.left, 5);\n  const secondPointY = round(touches[1].clientY - contentRect.top, 5);\n\n  return {\n    mouseX: (firstPointX + secondPointX) / 2 / scale,\n    mouseY: (firstPointY + secondPointY) / 2 / scale,\n  };\n}\n\nexport function handleZoomPinch(event) {\n  const {\n    scale,\n    options: { limitToBounds, limitToWrapper },\n    scalePadding: { disabled, size },\n    wheel: { limitsOnWheel },\n    pinch,\n  } = this.stateProvider;\n  const { contentComponent } = this.state;\n  if (pinch.disabled || this.stateProvider.options.disabled) return;\n\n  if (event.cancelable) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  // if one finger starts from outside of wrapper\n  if (this.pinchStartDistance === null) return;\n\n  // Position transformation\n  const { mouseX, mouseY } = calculateMidpoint(event, scale, contentComponent);\n\n  // if touches goes off of the wrapper element\n  if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY)) return;\n\n  const currentDistance = getCurrentDistance(event);\n\n  const newScale = calculatePinchZoom.call(\n    this,\n    currentDistance,\n    this.pinchStartDistance,\n  );\n  if (checkIfInfinite(newScale) || newScale === scale) return;\n\n  // Get new element sizes to calculate bounds\n  const bounds = handleCalculateBounds.call(\n    this,\n    newScale,\n    limitToWrapper,\n  );\n\n  // Calculate transformations\n  const isLimitedToBounds =\n    limitToBounds && (disabled || size === 0 || limitsOnWheel);\n\n  const { x, y } = handleCalculatePositions.call(\n    this,\n    mouseX,\n    mouseY,\n    newScale,\n    bounds,\n    isLimitedToBounds,\n  );\n\n  this.lastDistance = currentDistance;\n\n  this.stateProvider.positionX = x;\n  this.stateProvider.positionY = y;\n  this.stateProvider.scale = newScale;\n  this.stateProvider.previousScale = scale;\n\n  // update component transformation\n  this.applyTransformation();\n}\n","import { PropsList } from \"../interfaces/propsInterface\";\nimport { getClientPosition, handlePanningAnimation } from \"../pan\";\nimport { checkPositionBounds } from \"../zoom/utils\";\nimport { boundLimiter } from \"../utils\";\nimport { animate, handleDisableAnimation } from \"../animations\";\nimport { availableAnimations } from \"../animations/utils\";\n\nconst throttleTime = 30;\n\nfunction velocityTimeSpeed(speed, animationTime) {\n  const {\n    pan: { velocityEqualToMove },\n  }: PropsList = this.stateProvider;\n\n  if (velocityEqualToMove) {\n    return animationTime - animationTime / Math.max(1, speed);\n  }\n  return animationTime;\n}\n\nfunction handleEnableVelocity() {\n  this.setState({ startAnimation: false });\n}\n\nexport function handleFireVelocity() {\n  this.setState({ startAnimation: true });\n}\n\nexport function animateVelocity() {\n  const {\n    positionX,\n    positionY,\n    options: { limitToBounds },\n    pan: {\n      velocityBaseTime,\n      lockAxisX,\n      lockAxisY,\n      velocityAnimationType,\n      panReturnAnimationTime,\n      panReturnAnimationType,\n      padding,\n      paddingSize,\n    },\n    wrapperComponent,\n  } = this.stateProvider;\n  if (!this.mounted) return;\n  if (!this.velocity || !this.bounds) return handleDisableAnimation.call(this);\n\n  const {\n    maxPositionX,\n    minPositionX,\n    maxPositionY,\n    minPositionY,\n  } = this.bounds;\n\n  const { velocityX, velocityY, velocity } = this.velocity;\n  const animationTime = velocityTimeSpeed.call(\n    this,\n    velocity,\n    velocityBaseTime,\n  );\n\n  if (!animationTime) {\n    handlePanningAnimation.call(this);\n    return;\n  }\n\n  const targetX = velocityX;\n  const targetY = velocityY;\n\n  // pan return animation\n  const newAnimationTime =\n    animationTime > panReturnAnimationTime\n      ? animationTime\n      : panReturnAnimationTime;\n\n  const paddingValue = padding ? paddingSize : 0;\n\n  const paddingX = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetWidth) / 100\n    : 0;\n  const paddingY = wrapperComponent\n    ? (paddingValue * wrapperComponent.offsetHeight) / 100\n    : 0;\n\n  const maxTargetX = maxPositionX + paddingX;\n  const minTargetX = minPositionX - paddingX;\n\n  const maxTargetY = maxPositionY + paddingY;\n  const minTargetY = minPositionY - paddingY;\n\n  const startPosition = checkPositionBounds(\n    positionX,\n    positionY,\n    this.bounds,\n    limitToBounds,\n    paddingValue,\n    wrapperComponent,\n  );\n\n  const startTime = new Date().getTime();\n\n  // animation start timestamp\n  animate.call(this, velocityAnimationType, newAnimationTime, step => {\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / panReturnAnimationTime;\n    const returnAnimation = availableAnimations[panReturnAnimationType];\n\n    let customReturnStep = returnAnimation(animationProgress);\n\n    if (\n      frameTime > panReturnAnimationTime ||\n      customReturnStep > 1 ||\n      customReturnStep === Infinity ||\n      customReturnStep === -Infinity\n    )\n      customReturnStep = 1;\n\n    const currentPositionX = getPosition(\n      lockAxisX,\n      targetX,\n      step,\n      customReturnStep,\n      minPositionX,\n      maxPositionX,\n      limitToBounds,\n      positionX,\n      startPosition.x,\n      minTargetX,\n      maxTargetX,\n    );\n    const currentPositionY = getPosition(\n      lockAxisY,\n      targetY,\n      step,\n      customReturnStep,\n      minPositionY,\n      maxPositionY,\n      limitToBounds,\n      positionY,\n      startPosition.y,\n      minTargetY,\n      maxTargetY,\n    );\n\n    if (positionX !== currentPositionX || positionY !== currentPositionY) {\n      // Save panned position\n      this.stateProvider.positionX = currentPositionX;\n      this.stateProvider.positionY = currentPositionY;\n\n      // apply animation changes\n      this.applyTransformation();\n    }\n  });\n}\n\nexport function calculateVelocityStart(event) {\n  const {\n    scale,\n    options: { disabled },\n    pan: {\n      velocity,\n      velocitySensitivity,\n      velocityActiveScale,\n      velocityMinSpeed,\n    },\n    wrapperComponent,\n  } = this.stateProvider;\n\n  if (!velocity || velocityActiveScale >= scale || disabled) return;\n  handleEnableVelocity.call(this);\n  const now = Date.now();\n  if (this.lastMousePosition) {\n    const position = getClientPosition(event);\n    if (!position) return console.error(\"No mouse or touch position detected\");\n\n    const { clientX, clientY } = position;\n    const distanceX = clientX - this.lastMousePosition.clientX;\n    const distanceY = clientY - this.lastMousePosition.clientY;\n\n    const interval = now - this.velocityTime;\n\n    const wrapperToWindowScaleX =\n      2 - wrapperComponent.offsetWidth / window.innerWidth;\n    const wrapperToWindowScaleY =\n      2 - wrapperComponent.offsetHeight / window.innerHeight;\n\n    const scaledX =\n      20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleX));\n    const scaledY =\n      20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleY));\n\n    const velocityX =\n      (distanceX / interval) * velocitySensitivity * scale * scaledX;\n    const velocityY =\n      (distanceY / interval) * velocitySensitivity * scale * scaledY;\n\n    const speed = distanceX * distanceX + distanceY * distanceY;\n    const velocity = (Math.sqrt(speed) / interval) * velocitySensitivity;\n\n    if (this.velocity && velocity < this.velocity.velocity && this.throttle)\n      return;\n    this.velocity = { velocityX, velocityY, velocity };\n\n    // throttling\n    if (this.throttle) clearTimeout(this.throttle);\n    this.throttle = setTimeout(() => {\n      if (this.mounted) this.throttle = false;\n    }, throttleTime);\n  }\n  const position = getClientPosition(event);\n  this.lastMousePosition = position;\n  this.velocityTime = now;\n}\n\nfunction getPosition(\n  isLocked,\n  target,\n  step,\n  panReturnStep,\n  minBound,\n  maxBound,\n  limitToBounds,\n  offset,\n  startPosition,\n  minTarget,\n  maxTarget,\n) {\n  if (limitToBounds) {\n    if (startPosition > minBound && offset > maxBound) {\n      const newPosition =\n        startPosition - (startPosition - maxBound) * panReturnStep;\n      if (newPosition > maxTarget) return maxTarget;\n      if (newPosition < maxBound) return maxBound;\n      return newPosition;\n    }\n    if (startPosition < minBound && offset < minBound) {\n      const newPosition =\n        startPosition - (startPosition - minBound) * panReturnStep;\n      if (newPosition < minTarget) return minTarget;\n      if (newPosition > minBound) return minBound;\n      return newPosition;\n    }\n  }\n  if (isLocked) return startPosition;\n  const offsetPosition = offset + target * step;\n  return boundLimiter(offsetPosition, minBound, maxBound, limitToBounds);\n}\n","// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nlet passiveSupported = false;\n\nfunction makePassiveEventOption(passive) {\n  return passiveSupported ? { passive } : passive;\n}\n\nexport default makePassiveEventOption;\n","export const propsList = [\n  \"previousScale\",\n  \"scale\",\n  \"positionX\",\n  \"positionY\",\n  \"defaultPositionX\",\n  \"defaultPositionY\",\n  \"defaultScale\",\n  \"onWheelStart\",\n  \"onWheel\",\n  \"onWheelStop\",\n  \"onPanningStart\",\n  \"onPanning\",\n  \"onPanningStop\",\n  \"onPinchingStart\",\n  \"onPinching\",\n  \"onPinchingStop\",\n  \"onZoomChange\",\n  \"options\",\n  \"wheel\",\n  \"scalePadding\",\n  \"pan\",\n  \"pinch\",\n  \"zoomIn\",\n  \"zoomOut\",\n  \"doubleClick\",\n  \"reset\",\n];\n\nexport const getValidPropsFromObject = props => {\n  return Object.keys(props).reduce((acc, key) => {\n    if (propsList.includes(key)) {\n      acc[key] = props[key];\n    }\n    return acc;\n  }, {});\n};\n","import React, { Component } from \"react\";\nimport { initialState } from \"./InitialState\";\nimport {\n  mergeProps,\n  getDistance,\n  handleCallback,\n  handleWheelStop,\n  getWindowScaleX,\n  getWindowScaleY,\n} from \"./utils\";\nimport {\n  handleZoomControls,\n  handleDoubleClick,\n  resetTransformations,\n  handlePaddingAnimation,\n  handleWheelZoom,\n  handleCalculateBounds,\n} from \"./zoom\";\nimport { handleDisableAnimation, animateComponent } from \"./animations\";\nimport { handleZoomPinch } from \"./pinch\";\nimport { handlePanning, handlePanningAnimation } from \"./pan\";\nimport {\n  handleFireVelocity,\n  animateVelocity,\n  calculateVelocityStart,\n} from \"./velocity\";\nimport makePassiveEventOption from \"./makePassiveEventOption\";\nimport {\n  StateContextState,\n  StateContextProps,\n} from \"./interfaces/stateContextInterface\";\nimport { getValidPropsFromObject } from \"./propsHandlers\";\n\nconst Context = React.createContext({});\n\nlet wheelStopEventTimer = null;\nconst wheelStopEventTime = 180;\nlet wheelAnimationTimer = null;\nconst wheelAnimationTime = 100;\n\nclass StateProvider extends Component<StateContextProps, StateContextState> {\n  public mounted = true;\n\n  public state = {\n    wrapperComponent: undefined,\n    contentComponent: undefined,\n  };\n  public stateProvider = {\n    ...initialState,\n    ...mergeProps(initialState, this.props.dynamicValues),\n    ...this.props.defaultValues,\n    previousScale:\n      this.props.dynamicValues.scale ||\n      this.props.defaultValues.scale ||\n      initialState.scale,\n  };\n\n  public windowToWrapperScaleX = 0;\n  public windowToWrapperScaleY = 0;\n  // panning helpers\n  public startCoords = null;\n  public isDown = false;\n  // pinch helpers\n  public pinchStartDistance = null;\n  public lastDistance = null;\n  public pinchStartScale = null;\n  public distance = null;\n  public bounds = null;\n  // velocity helpers\n  public velocityTime = null;\n  public lastMousePosition = null;\n  public velocity = null;\n  public offsetX = null;\n  public offsetY = null;\n  public throttle = false;\n  // wheel helpers\n  public previousWheelEvent = null;\n  public lastScale = null;\n  // animations helpers\n  public animate = null;\n  public animation = null;\n  public maxBounds = null;\n\n  componentDidMount() {\n    const passiveOption = makePassiveEventOption(false);\n\n    // Panning on window to allow panning when mouse is out of wrapper\n    window.addEventListener(\n      \"mousedown\",\n      this.handleStartPanning,\n      passiveOption,\n    );\n    window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n  }\n\n  componentWillUnmount() {\n    const passiveOption = makePassiveEventOption(false);\n\n    window.removeEventListener(\n      \"mousedown\",\n      this.handleStartPanning,\n      passiveOption,\n    );\n    window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.removeEventListener(\n      \"mouseup\",\n      this.handleStopPanning,\n      passiveOption,\n    );\n    handleDisableAnimation.call(this);\n  }\n\n  componentDidUpdate(oldProps, oldState) {\n    const { wrapperComponent, contentComponent } = this.state;\n    const { dynamicValues } = this.props;\n    if (!oldState.contentComponent && contentComponent) {\n      this.stateProvider.contentComponent = contentComponent;\n    }\n    if (\n      !oldState.wrapperComponent &&\n      wrapperComponent &&\n      wrapperComponent !== undefined\n    ) {\n      this.stateProvider.wrapperComponent = wrapperComponent;\n      this.windowToWrapperScaleX = getWindowScaleX(wrapperComponent);\n      this.windowToWrapperScaleY = getWindowScaleY(wrapperComponent);\n\n      // Zooming events on wrapper\n      const passiveOption = makePassiveEventOption(false);\n      wrapperComponent.addEventListener(\n        \"wheel\",\n        this.handleWheel,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"dblclick\",\n        this.handleDbClick,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchstart\",\n        this.handleTouchStart,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchmove\",\n        this.handleTouch,\n        passiveOption,\n      );\n      wrapperComponent.addEventListener(\n        \"touchend\",\n        this.handleTouchStop,\n        passiveOption,\n      );\n    }\n\n    // set bound for animations\n    if (\n      (wrapperComponent && contentComponent) ||\n      oldProps.dynamicValues !== dynamicValues\n    ) {\n      this.maxBounds = handleCalculateBounds.call(\n        this,\n        this.stateProvider.scale,\n        this.stateProvider.options.limitToWrapper,\n      );\n    }\n\n    // must be at the end of the update function, updates\n    if (oldProps.dynamicValues && oldProps.dynamicValues !== dynamicValues) {\n      this.animation = null;\n      this.stateProvider = {\n        ...this.stateProvider,\n        ...mergeProps(this.stateProvider, dynamicValues),\n      };\n      this.applyTransformation(null, null, null);\n    }\n  }\n\n  //////////\n  // Wheel\n  //////////\n\n  handleWheel = event => {\n    const {\n      scale,\n      wheel: { disabled, wheelEnabled, touchPadEnabled },\n    } = this.stateProvider;\n\n    const { onWheelStart, onWheel, onWheelStop } = this.props;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (\n      this.isDown ||\n      disabled ||\n      this.stateProvider.options.disabled ||\n      !wrapperComponent ||\n      !contentComponent\n    )\n      return;\n\n    // ctrlKey detects if touchpad execute wheel or pinch gesture\n    if (!wheelEnabled && !event.ctrlKey) return;\n    if (!touchPadEnabled && event.ctrlKey) return;\n\n    // Wheel start event\n    if (!wheelStopEventTimer) {\n      this.lastScale = scale;\n      handleDisableAnimation.call(this);\n      handleCallback(onWheelStart, this.getCallbackProps());\n    }\n\n    // Wheel event\n    handleWheelZoom.call(this, event);\n    handleCallback(onWheel, this.getCallbackProps());\n    this.applyTransformation(null, null, null);\n    this.previousWheelEvent = event;\n\n    // Wheel stop event\n    if (handleWheelStop(this.previousWheelEvent, event, this.stateProvider)) {\n      clearTimeout(wheelStopEventTimer);\n      wheelStopEventTimer = setTimeout(() => {\n        if (!this.mounted) return;\n        handleCallback(onWheelStop, this.getCallbackProps());\n        wheelStopEventTimer = null;\n      }, wheelStopEventTime);\n    }\n\n    // cancel animation\n    this.animate = false;\n\n    // fire animation\n    this.lastScale = this.stateProvider.scale;\n    clearTimeout(wheelAnimationTimer);\n    wheelAnimationTimer = setTimeout(() => {\n      if (!this.mounted) return;\n      handlePaddingAnimation.call(this, event);\n    }, wheelAnimationTime);\n  };\n\n  //////////\n  // Panning\n  //////////\n\n  checkPanningTarget = event => {\n    const {\n      pan: { disableOnTarget },\n    } = this.stateProvider;\n\n    return (\n      disableOnTarget\n        .map(tag => tag.toUpperCase())\n        .includes(event.target.tagName) ||\n      disableOnTarget.find(element =>\n        event.target.classList.value.includes(element),\n      )\n    );\n  };\n\n  checkIsPanningActive = event => {\n    const {\n      pan: { disabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    return (\n      !this.isDown ||\n      disabled ||\n      this.stateProvider.options.disabled ||\n      (event.touches &&\n        (event.touches.length !== 1 ||\n          Math.abs(this.startCoords.x - event.touches[0].clientX) < 1 ||\n          Math.abs(this.startCoords.y - event.touches[0].clientY) < 1)) ||\n      !wrapperComponent ||\n      !contentComponent\n    );\n  };\n\n  handleSetUpPanning = (x, y) => {\n    const { positionX, positionY } = this.stateProvider;\n    this.isDown = true;\n    this.startCoords = { x: x - positionX, y: y - positionY };\n\n    handleCallback(this.props.onPanningStart, this.getCallbackProps());\n  };\n\n  handleStartPanning = event => {\n    const {\n      wrapperComponent,\n      scale,\n      options: { minScale, maxScale, limitToWrapper },\n      pan: { disabled },\n    } = this.stateProvider;\n    const { target, touches } = event;\n\n    if (\n      disabled ||\n      this.stateProvider.options.disabled ||\n      (wrapperComponent && !wrapperComponent.contains(target)) ||\n      this.checkPanningTarget(event) ||\n      scale < minScale ||\n      scale > maxScale\n    )\n      return;\n\n    handleDisableAnimation.call(this);\n    this.bounds = handleCalculateBounds.call(this, scale, limitToWrapper);\n\n    // Mobile points\n    if (touches && touches.length === 1) {\n      this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\n    }\n    // Desktop points\n    if (!touches) {\n      this.handleSetUpPanning(event.clientX, event.clientY);\n    }\n  };\n\n  handlePanning = event => {\n    if (this.isDown) event.preventDefault();\n    if (this.checkIsPanningActive(event)) return;\n    event.stopPropagation();\n    calculateVelocityStart.call(this, event);\n    handlePanning.call(this, event);\n    handleCallback(this.props.onPanning, this.getCallbackProps());\n  };\n\n  handleStopPanning = () => {\n    if (this.isDown) {\n      this.isDown = false;\n      this.animate = false;\n      this.animation = false;\n      handleFireVelocity.call(this);\n      handleCallback(this.props.onPanningStop, this.getCallbackProps());\n\n      const {\n        pan: { velocity },\n        scale,\n      } = this.stateProvider;\n\n      // start velocity animation\n      if (this.velocity && velocity && scale > 1) {\n        animateVelocity.call(this);\n      } else {\n        // fire fit to bounds animation\n        handlePanningAnimation.call(this);\n      }\n    }\n  };\n\n  //////////\n  // Pinch\n  //////////\n\n  handlePinchStart = event => {\n    const { scale } = this.stateProvider;\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleDisableAnimation.call(this);\n    const distance = getDistance(event.touches[0], event.touches[1]);\n    this.pinchStartDistance = distance;\n    this.lastDistance = distance;\n    this.pinchStartScale = scale;\n    this.isDown = false;\n\n    handleCallback(this.props.onPinchingStart, this.getCallbackProps());\n  };\n\n  handlePinch = event => {\n    this.isDown = false;\n    handleZoomPinch.call(this, event);\n    handleCallback(this.props.onPinching, this.getCallbackProps());\n  };\n\n  handlePinchStop = () => {\n    if (typeof this.pinchStartScale === \"number\") {\n      this.isDown = false;\n      this.velocity = null;\n      this.lastDistance = null;\n      this.pinchStartScale = null;\n      this.pinchStartDistance = null;\n      handlePaddingAnimation.call(this);\n      handleCallback(this.props.onPinchingStop, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Touch Events\n  //////////\n\n  handleTouchStart = event => {\n    const {\n      wrapperComponent,\n      contentComponent,\n      scale,\n      options: { disabled, minScale },\n    } = this.stateProvider;\n    const { touches } = event;\n    if (disabled || !wrapperComponent || !contentComponent || scale < minScale)\n      return;\n    handleDisableAnimation.call(this);\n\n    if (touches && touches.length === 1) return this.handleStartPanning(event);\n    if (touches && touches.length === 2) return this.handlePinchStart(event);\n  };\n\n  handleTouch = event => {\n    const { pan, pinch, options } = this.stateProvider;\n    if (options.disabled) return;\n    if (!pan.disabled && event.touches.length === 1)\n      return this.handlePanning(event);\n    if (!pinch.disabled && event.touches.length === 2)\n      return this.handlePinch(event);\n  };\n\n  handleTouchStop = () => {\n    this.handleStopPanning();\n    this.handlePinchStop();\n  };\n\n  //////////\n  // Controls\n  //////////\n\n  zoomIn = event => {\n    const {\n      zoomIn: { disabled, step },\n      options,\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Zoom in function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleZoomControls.call(this, 1, step);\n  };\n\n  zoomOut = event => {\n    const {\n      zoomOut: { disabled, step },\n      options,\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Zoom out function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleZoomControls.call(this, -1, step);\n  };\n\n  handleDbClick = event => {\n    const {\n      options,\n      doubleClick: { disabled, step },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n\n    if (!event) throw Error(\"Double click function requires event prop\");\n    if (disabled || options.disabled || !wrapperComponent || !contentComponent)\n      return;\n    handleDoubleClick.call(this, event, 1, step);\n  };\n\n  setScale = (newScale, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !wrapperComponent || !contentComponent) return;\n    const targetState = {\n      positionX,\n      positionY,\n      scale: isNaN(newScale) ? scale : newScale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setPositionX = (newPosX, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n    const targetState = {\n      positionX: isNaN(newPosX) ? positionX : newPosX,\n      positionY,\n      scale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setPositionY = (newPosY, speed = 200, type = \"easeOut\") => {\n    const {\n      positionX,\n      scale,\n      positionY,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n\n    const targetState = {\n      positionX,\n      positionY: isNaN(newPosY) ? positionY : newPosY,\n      scale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  setTransform = (\n    newPosX,\n    newPosY,\n    newScale,\n    speed = 200,\n    type = \"easeOut\",\n  ) => {\n    const {\n      positionX,\n      positionY,\n      scale,\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    const { wrapperComponent, contentComponent } = this.state;\n    if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\n      return;\n\n    const targetState = {\n      positionX: isNaN(newPosX) ? positionX : newPosX,\n      positionY: isNaN(newPosY) ? positionY : newPosY,\n      scale: isNaN(newScale) ? scale : newScale,\n    };\n\n    animateComponent.call(this, {\n      targetState,\n      speed,\n      type,\n    });\n  };\n\n  resetTransform = () => {\n    const {\n      options: { disabled, transformEnabled },\n    } = this.stateProvider;\n    if (disabled || !transformEnabled) return;\n    resetTransformations.call(this);\n  };\n\n  setDefaultState = () => {\n    this.animation = null;\n    this.stateProvider = {\n      ...this.stateProvider,\n      scale: initialState.scale,\n      positionX: initialState.positionX,\n      positionY: initialState.positionY,\n      ...this.props.defaultValues,\n    };\n\n    this.forceUpdate();\n  };\n\n  //////////\n  // Setters\n  //////////\n\n  setWrapperComponent = wrapperComponent => {\n    this.setState({ wrapperComponent });\n  };\n\n  setContentComponent = contentComponent => {\n    this.setState({ contentComponent }, () => {\n      const {\n        wrapperComponent,\n        options: { centerContent, limitToBounds, limitToWrapper },\n        scale,\n      } = this.stateProvider;\n\n      const { positionX, positionY } = this.props.defaultValues;\n\n      if (\n        (limitToBounds && !limitToWrapper) ||\n        (centerContent && !positionX && !positionY)\n      ) {\n        const transform = `translate(25%, 25%) scale(${scale})`;\n        contentComponent.style.transform = transform;\n        contentComponent.style.WebkitTransform = transform;\n        // force update to inject state to the context\n        this.forceUpdate();\n        const startTime = new Date().getTime();\n        const maxTimeWait = 2000;\n        let interval = setInterval(() => {\n          if (wrapperComponent.offsetWidth) {\n            const bounds = handleCalculateBounds.call(this, scale, false);\n            this.stateProvider.positionX = bounds.minPositionX;\n            this.stateProvider.positionY = bounds.minPositionY;\n            this.applyTransformation(null, null, null);\n            clearInterval(interval);\n            interval = null;\n          } else if (new Date().getTime() - startTime > maxTimeWait) {\n            clearInterval(interval);\n            interval = null;\n          }\n        }, 20);\n      } else {\n        this.applyTransformation(null, null, null);\n      }\n    });\n  };\n\n  applyTransformation = (newScale, posX, posY) => {\n    if (!this.mounted) return;\n    const { contentComponent } = this.state;\n    const { onZoomChange } = this.props;\n    const { previousScale, scale, positionX, positionY } = this.stateProvider;\n    if (!contentComponent)\n      return console.error(\"There is no content component\");\n    const transform = `translate(${posX || positionX}px, ${posY ||\n      positionY}px) scale(${newScale || scale})`;\n    contentComponent.style.transform = transform;\n    contentComponent.style.WebkitTransform = transform;\n    // force update to inject state to the context\n    this.forceUpdate();\n    if (onZoomChange && previousScale !== scale) {\n      handleCallback(onZoomChange, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Props\n  //////////\n\n  getCallbackProps = () => getValidPropsFromObject(this.stateProvider);\n\n  render() {\n    const { wrapperComponent, contentComponent } = this.state;\n    /**\n     * Context provider value\n     */\n    const value = {\n      loaded: Boolean(wrapperComponent && contentComponent),\n      state: this.getCallbackProps(),\n      dispatch: {\n        setScale: this.setScale,\n        setPositionX: this.setPositionX,\n        setPositionY: this.setPositionY,\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        setTransform: this.setTransform,\n        resetTransform: this.resetTransform,\n        setDefaultState: this.setDefaultState,\n      },\n      nodes: {\n        setWrapperComponent: this.setWrapperComponent,\n        setContentComponent: this.setContentComponent,\n      },\n    };\n    const { children } = this.props;\n    const content =\n      typeof children === \"function\"\n        ? children({ ...value.state, ...value.dispatch })\n        : children;\n\n    return <Context.Provider value={value}>{content}</Context.Provider>;\n  }\n}\n\nexport { Context, StateProvider };\n","import React from \"react\";\nimport { StateProvider } from \"../store/StateContext\";\nimport { deleteUndefinedProps } from \"../store/utils\";\nimport { getValidPropsFromObject } from \"../store/propsHandlers\";\nimport { PropsList } from \"../store/interfaces/propsInterface\";\n\nconst TransformWrapper = ({\n  children,\n  defaultPositionX,\n  defaultPositionY,\n  defaultScale,\n  onWheelStart,\n  onWheel,\n  onWheelStop,\n  onPanningStart,\n  onPanning,\n  onPanningStop,\n  onPinchingStart,\n  onPinching,\n  onPinchingStop,\n  onZoomChange,\n  ...rest\n}: PropsList) => {\n  const props = { ...rest };\n  if (props.options && props.options.limitToWrapper) {\n    props.options.limitToBounds = true;\n  }\n  return (\n    <StateProvider\n      defaultValues={deleteUndefinedProps({\n        positionX: defaultPositionX,\n        positionY: defaultPositionY,\n        scale: defaultScale,\n      })}\n      dynamicValues={deleteUndefinedProps(getValidPropsFromObject(props))}\n      onWheelStart={onWheelStart}\n      onWheel={onWheel}\n      onWheelStop={onWheelStop}\n      onPanningStart={onPanningStart}\n      onPanning={onPanning}\n      onPanningStop={onPanningStop}\n      onPinchingStart={onPinchingStart}\n      onPinching={onPinching}\n      onPinchingStop={onPinchingStop}\n      onZoomChange={onZoomChange}\n    >\n      {children}\n    </StateProvider>\n  );\n};\n\nexport { TransformWrapper };\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from \"react\";\nimport { Context } from \"../store/StateContext\";\nimport styles from \"./TransformComponent.module.css\";\n\nclass TransformComponent extends React.Component {\n  private wrapperRef = React.createRef<HTMLDivElement>();\n  private contentRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    const { nodes } = this.context;\n    nodes.setWrapperComponent(this.wrapperRef.current);\n    nodes.setContentComponent(this.contentRef.current);\n  }\n\n  render() {\n    const { children } = this.props;\n    const {\n      state: {\n        positionX,\n        positionY,\n        scale,\n        options: { wrapperClass, contentClass },\n      },\n    } = this.context;\n\n    const style = {\n      WebkitTransform: `translate(${positionX}px, ${positionY}px) scale(${scale})`,\n      transform: `translate(${positionX}px, ${positionY}px) scale(${scale})`,\n    };\n    return (\n      <div\n        ref={this.wrapperRef}\n        className={`react-transform-component ${styles.container} ${wrapperClass}`}\n      >\n        <div\n          ref={this.contentRef}\n          className={`react-transform-element ${styles.content} ${contentClass}`}\n          style={style}\n        >\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\nTransformComponent.contextType = Context;\n\nexport { TransformComponent };\n"]},"metadata":{},"sourceType":"module"}